
<!DOCTYPE html>
<html>
<head>
<title>在线客服</title>
<meta charset="utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" >
<meta name="description" content="访客系统 - 在线客服"/>
<meta name="keywords" content="访客系统 - 在线客服"/>
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="https://qiyukf.nosdn.127.net/sdk/tr/t_trade_index_m0_39bb7b3f001e1a496721b982234dd820.css"/>
<style>
/**
 * ===========================
 * 访客端-皮肤变量主题色-公共布局
 * ===========================
 */
/* trade */
.g-mask{background-color: #337eff;}
.g-slide .slide_hd{background-color: #337eff;}
.g-body .body_hd{background-color: #337eff;}
.head-minsize{background-color: #337eff;}
.m-msglist .msg_right .bot .text+.arrow:before{border-left-color:#337eff;}
/* trade end */
.g-hd{background-color: #337eff;}
.g-td.now_robot .u-btn,
.g-td.now_robot .u-btn:link,
.g-td.now_robot .u-btn:hover,
.g-td.now_robot .u-btn:active{background-color: #337eff; -moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
.g-td.now_robot .form_cnt_send .u-btn{background-color: #337eff;}
.g-td.now_robot .form_cnt_send .u-btn:link{background-color:#337eff; -moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
.g-td.now_robot .form_cnt_send .u-btn:hover{background-color:#337eff; -moz-opacity:0.8;-khtml-opacity: 0.8;opacity: 0.8;}
.g-td.now_robot .form_cnt_send .u-btn:active{background-color:#337eff; -moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
/**
 * ==================
 * 模块
 * ==================
 */
.m-msglist .msg_right .text,
.m-msglist .msg_right .qa,
.m-msglist .msg_right .qa-list,
.m-msglist .msg_right .action,
.m-msglist .msg_right .rich,
.m-msglist .msg_right .question{background-color: #337eff;border-color: #337eff;}
.m-msglist .msg_right .un-read{color: #337eff}
.m-msglist .msg_right .text .arrow,
.m-msglist .msg_right .text .arrow:before,
.m-msglist .msg_right .image .arrow,
.m-msglist .msg_right .image .arrow:before,
.m-msglist .msg_right .qa .arrow,
.m-msglist .msg_right .qa .arrow:before,
.m-msglist .msg_right .qa-list .arrow,
.m-msglist .msg_right .qa-list .arrow:before,
.m-msglist .msg_right .action .arrow,
.m-msglist .msg_right .action .arrow:before,
.m-msglist .msg_right .rich .arrow,
.m-msglist .msg_right .rich .arrow:before,
.m-msglist .msg_right .question .arrow,
.m-msglist .msg_right .question .arrow:before,
.m-msglist .msg_right .audio .audio-wrap .arrow,
.m-msglist .msg_right .audio .audio-wrap .arrow:before,
.m-msglist .msg_right .crm-thirdorder .arrow{border-left-color:#337eff;}
.m-msglist .msg_right .crm-thirdorder .text+.arrow:before{border-left-color:#337eff;}
.m-msglist .msg_right .crm-thirdorder-bd{
border-color: #337eff;}
.m-msglist .msg_left .u-icon-avater{background-color: #fff;}
.m-msglist .msg_right .u-icon-avater{background-color: #337eff;}
.m-msglist .msg_right .audio .audio-wrap,
/* botfaq融合模版-消息-web版 */
.m-msglist .msg_right .crm-thirdorder .qiyu_template_mixReply .crm-thirdorder-bd{
border-color: #337eff;
background-color: #337eff;
color:#fff;
}
.m-msglist .msg_right .qiyu_template_mixReply+.arrow{
border-left-color: transparent;
}
.m-msglist .msg_right .qiyu_template_mixReply+.arrow:before{
border-left-color: #337eff;
}
/* botfaq融合模版-消息-web版-trade适配 */
.m-msglist .msg_right .qiyu_template_mixReply .bot-bd{
border-color: #337eff;
background-color: #337eff;
color:#fff;
}
/* botfaq融合模版-消息-mobile版 */
.m-msglist .msg_right .crm-thirdorder .qiyu_template_mixReply .crm-thirdorder-bd+.arrow{
border-left-color: transparent;
}
.m-msglist .msg_right .crm-thirdorder .qiyu_template_mixReply .crm-thirdorder-bd+.arrow:before{
border-left-color: #337eff;
}
.m-modal .modal_hd{border-bottom:1px solid #337eff;}
.m-modal-confirmphoto .modal_ft{border-top: 1px solid #337eff;}
.m-modal-confirmphoto .ok{background-color: #337eff;}
.m-modal-confirmphoto .ok:hover{background-color:#337eff; -moz-opacity:0.8;-khtml-opacity: 0.8;opacity: 0.8;}
.m-modal-confirmphoto .ok:active{background-color:#337eff; -moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
.m-form-evaluate .form_item.itm-tag-list .tag-item.active{color: #337eff; border-color: #337eff}
.m-form-evaluate .m-solve .z-sel{color: #337eff; border-color: #337eff}
.m-modal-filetrans .ok{background-color: #337eff;}
.m-modal-filetrans .ok:hover{background-color:#337eff; -moz-opacity:0.8;-khtml-opacity: 0.8;opacity: 0.8;}
.m-modal-filetrans .ok:active{background-color:#337eff; -moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
.m-comment .comment_btn{background-color: #337eff;}
.m-comment .comment_btn:hover{background-color:#337eff; -moz-opacity:0.8;-khtml-opacity: 0.8;opacity: 0.8;}
.m-comment .comment_btn:active{background-color:#337eff; -moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
.m-botentry li {border-color : #337eff};
/**
 * ==================
 * 元件
 * ==================
 */
.z-disabled button,
.z-disabled button:link,
.z-disabled button:hover,
.z-disabled button:active{background-color: #337eff; -moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
/* 按钮相关 */
.u-btn,
.u-btn:link,
.u-btn:hover{background-color:#337eff;}
.u-btn:active,
.u-btn.z-disabled,
.u-btn.z-disabled:hover,
.u-btn.z-disabled:active,
.u-btn.z-disabled:link{background-color: #337eff; -moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
.u-btn-disabled,
.u-btn-disabled:link,
.u-btn-disabled:hover,
.u-btn-disabled:active{background-color: #337eff;-moz-opacity:0.6;-khtml-opacity: 0.6;opacity: 0.6;}
.u-border-btn,
.u-border-btn:hover{background-color: #fff;border: 1px solid #337eff; color: #337eff !important}
.service-action,
.service-action:link,
.service-action:hover{background-color:#337eff !important; color: #fff !important; border: 0 !important}
</style>
<style type="text/css">
::-webkit-scrollbar {
width: 7px;
height:7px;
}
::-webkit-scrollbar-button {
display: none;
}
::-webkit-scrollbar-thumb {
border-radius: 3px;
background: #dddfe0;
}
::-webkit-scrollbar-track {
width: 7px;
height: 7px;
}
::-webkit-scrollbar-track-piece {
background: transparent;
}
</style>
<!--[if lt IE 10]>
<style>
.m-msglist .file .progress-size{
display: none
}
.m-msglist .file .progress-bar{
display: none;
}
.m-msglist .file .abort{
display: none;
}
.m-modal-filetrans .icon{
display: none;
}
.m-modal-filetrans .size{
display: none;
}
</style>
<![endif]-->
<!--[if lte IE 8]>
<style>
.m-modal-filetrans .modal_dialog{
width: 245px;
top: 115px;
margin-left: -122px;
}
.m-msglist .msg .bot .icon{
display: none;
}
</style>
<![endif]-->
</head>
<body>
<!--[if lte IE 8]>
<div class="u-browser-tip" id="browser-tip">
<p>当前浏览器无法获得最佳显示效果，推荐使用现代浏览器访问</p>
<span class="close" onclick="document.getElementById('browser-tip').style.display='none'"></span>
</div>
<![endif]-->


<table class="g-table">
<tbody>
<tr>
<td>
<div class="g-main g-main-visitor hasCorpInfo" id="ysf-client">
<div class="g-mask"></div>
</div>
</td>
</tr>
</tbody>
</table>
<div id="template-box" style="display:none;">
</div>
<script>location.config = {root:'/tr/',mode:0,ver:{"trade/chat/mobile/index.html":"fac2934e0335f926451b1104dc68c207","trade/chat/pc/index.html":"582989efd621f50d119792a39ed8c50b","trade/layout/index.html":"1a075156ee0f47aea8bf474fc79f26f9","trade/session/mobile/index.html":"496976f0de298e95c9747884a58d80eb","trade/session/pc/index.html":"d8defc6a339a7225936ced95d47f835a","trade/show/mobile/index.html":"de0d78dda3d7d016bd3a72df285eb675","trade/show/pc/index.html":"14208cea21e3bb97b6cbe3952bddc6f1","trade/tab/index.html":"dd6385e918c6b3d4338f208c87a33aed"}};</script>
<script type="text/javascript">
window.timeOffset = 1576745002109 - (+new Date);
window.theme = 0;
window.appConfig = {protocol:{sdk:"https",boss:"https",kefu:"https",supr:"https"},domain:{sdk:"qiyukf.com",boss:"qiyukf.com",kefu:"qiyukf.com",supr:"qiyukf.com"},path:{sdk:"\/sdk/",boss:"\/prd/",kefu:"\/prd/",supr:"\/sup/"},online:{sdk:"\/sdk/",boss:"\/prd/",kefu:"\/prd/",supr:"\/sup/"}};
history.auto = !0;
</script>
<script>
window.logSetting = {serverAddr: 'https://qy-swallow.qiyukf.com', version: '3.14' }
if(window.localStorage){
window.localStorage.setItem('debug', 'callcenter*,JsSIP*,QiyuConnect:Stats');
window.localStorage.setItem('debugNums', 10);
}
</script>
<script src="https://qiyukf.nosdn.127.net/sdk/res/lib/debug_b6c5f5a8cac89c4abc648c23ecda7b40.js"></script>
<script type="text/javascript">
window.setting = {
corpLogo:'https://ysf.nosdn.127.net/8EB993549C9D21356C61D308AD649BD5',
tradeTag : 0,
showEmoji: 1,
showAudio: 1,
inputPlaceholder: '输入消息...',
dialogMobileStyle : 2,
qiyuInfoSwitch: 1,
showEvaluation: 1
};
window.globalSetting = {heartbeatCycle:8000,newLayout:false};
// set version
window.globalSetting.version = '3.14';
window.companyInfo = {pictureUrl:"https://ysf.nosdn.127.net/198B5713F03B9FA1D9D11B61DCC47569",questions:[{id:3007182,answer:"1、在客服模式下查看留言模块，在管理员模式下是没有留言的。 2、留言有10分钟机制，访客超过10分钟没有发消息后，会把之前的消息合并成1条留言显示在留言模块中。",title:"客服看不到留言"},{id:3007183,answer:"1、检查公众号是否认证，如公众号无认证，否则无法正常回复顾客对话哦； 2、检查客服是否在线，如客服不在线，访客会进入到留言模式，无法正常收发消息；",title:"微信公众号收不到消息"},{id:3007184,answer:"七鱼帮助中心提供：七鱼接入指南，在线客服介绍，呼叫中心等功能介绍，<a href=\"http://help.qiyukf.com/\" data-action=\"openlink\">点此进入帮助中心<\/a>",title:"帮助中心自助查询"},{id:3007185,answer:"拨打客服电话4009-000-163，或者联系在线人工客服下单。",title:"购买网易七鱼套餐的流程"},{id:3007186,answer:"<a href=\"http://qiyukf.com/kehu\" data-action=\"openlink\">点此请查<\/a>看官网部分客户案例",title:"客户案例"},{id:3007187,answer:"您可以在帮助中心进行查看，<a target=\"_blank\" href=\"http://help.qiyukf.com/archives/3911\">点此查看详情<\/a>。",title:"怎么模拟会话"},{id:3007188,answer:"<a target=\"_blank\" href=\"https://qiyukf.com/docs/updates/notes.html\">https://qiyukf.com/docs/updates/notes.html<\/a>",title:"七鱼版本更新日志"}],dialogTitleSwitch:0,pictureHref:"http://help.qiyukf.com/archives/category/%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98/%e5%9c%a8%e7%ba%bf%e5%8a%9f%e8%83%bd",logoSwitch:0,pictureName:"帮助中心.png",visitorSwitch:1,announcementContent:"<p>可点击下方图片跳转链接进行自查<\/p>",announcementTitle:"帮助中心自查入口",name:" 网易七鱼",dialogTitle:"在线客服",pictureSize:8212};
window.resourceConfig = {
sdk : 'https://qiyukf.com'+'/sdk/' + '/res/img/',
satisfy : 'https://qiyukf.com'+'/sdk/' + 'res/img/satisfy/'
};
window.MIN_LBS = 'https://lbs.netease.im/lbs/webconf.jsp?devflag=qyonline';
window.MIN_DEBUG_MODE = false;
window.__YSFDAROOT__ = "https://da.qiyukf.com/webda/da.gif";
// permission setting
window.permissionSetting = {SHOW_COMPANY_INFO:1,KNOWLEDGE_STATISTICS:1};
</script>
<script src="https://qiyukf.nosdn.127.net/sdk/res/lib/nim_base_v2.8.3_984c37deae41af930967d5bf6a980703.js"></script>
<script src="https://qiyukf.nosdn.127.net/sdk/res/lib/nim_v2.8.3_9c48f889da74cbf08fc54f0bd4883e15.js"></script>
<script src="https://qiyukf.nosdn.127.net/sdk/res/lib/TweenMax.min_7ae6465dae50c862dc55a547caa86a66.js"></script>
<div style="display:none" id="umi://trade/layout/index.html">
<textarea id="layout-body" name="txt">
<div class="g-mnc">
<div class="j-flag g-slide"></div>
<div class="j-flag g-body"></div>
</div>
</textarea>
<textarea name="js">I$("2e6ba584ba8f99fd619131a66b563e4a",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){u=t._$klass();f=u._$extend(c._$$Module);f.__doBuild=function(){this.__tid="layout-body";this.__super();this.__hideMask();var t=i._$getByClassName(this.__body,"j-flag");this.__export={sess:t[0],show:t[1]};if(this.__isMobilePlatform()&&2!=window.setting.dialogMobileStyle)this.__doConnect();else if(!this.__isMobilePlatform()&&1!=window.setting.winType)this.__doConnect();if(this.__isMobilePlatform()&&2==window.setting.dialogMobileStyle&&window==top){this.__doConnect();i._$addClassName(this.__body,"m-mobile-frame-open")}n._$loop({onmessage:this.__onMessage._$bind(this),onkickout:this.__onKickout._$bind(this)},function(t,e){r._$addEvent(e,t)});this.__doInitDomEvent([[document,"visibilitychange",this.__onVisibilityChange._$bind(this)],[window,"message",this.__onSdkMsg._$bind(this)]])};f.__onShow=function(t){this.__super(t)};f.__onRefresh=function(t){if(!t.param.bid){var e=n._$query2object(location.search.substr(1));_.SHOPID=e.bid||-1}else _.SHOPID=t.param.bid||-1;this.__super(t);this.__title=document.title};f.__onHide=function(){this.__super()};f.__doConnect=function(){d._$connect({appkey:setting.appkey})};f.__checkSendPrdMsg=function(){var t=_._$getSessionByBid(_.SHOPID);if(t){if(200==t.sessionStatus.status)if(0==t.kefu.isRobot)r._$sendPrdMsg(_.SHOPID);else{var e=r.__getProductInfo();if(e&&1==e.sendProToRobot)r._$sendPrdMsg(_.SHOPID)}}else console.error("session not exist when send prdMsg")};f.__onSdkMsg=function(t){var e={status:function(t){_.isLayerOpen=t.layerOpen;this.__iframeOpenClearUnread();if(s._$isFrameModule()&&_.isLayerOpen)this.__checkSendPrdMsg()},doconnect:function(t){if("1"!=t.reconnect)this.__doConnect();else r._$applyRGKefu(_.SHOPID)}};return function(t){try{var i=(t.data||"").split(":"),n=e[(i.shift()||"").toLowerCase()];if(n)n.call(this,JSON.parse(i.join(":")))}catch(s){}}}();f.__isMobilePlatform=function(){if(/(iPhone|iPod|iOS|Android)/i.test(navigator.userAgent))return!0;else return!1},f.__hideMask=function(){var t=i._$getByClassName(document.body,"g-mask")[0];i._$addClassName(t,"f-dn")};f.__onMessage=function(t){if(!t.fromUser)this.__renderMarqueeTitle(!0)};f.__onVisibilityChange=function(){this.__renderMarqueeTitle();var t=localStorage.getItem("YSF-CLEARTIME-"+_.SHOPID);var e=_._$getMsgListByBid(_.SHOPID);var i;if(e)for(var n=e.length-1;n>=0;n--)if(0==e[n].fromUser&&"inish"!=e[n].type&&"eval-show"!=e[n].type){i=e[n].time;break}if(!t||t&&t<i)this.__winchangeToServr()};f.__renderMarqueeTitle=function(t){var e=_._$getUnreadTotal();if(!document.hidden)this.__doUnMarqueeTitle();else if(t)this.__doMarqueeTitle("在线客服（有新消息）");else if(e>0)this.__doMarqueeTitle("在线客服（有未读消息）")};f.__winchangeToServr=function(){if(!document.hidden)if(s._$isFrameModule()){if(_.isLayerOpen)r._$clearUnreadMsg(_.SHOPID);else if(s._$isMobilePlatform()&&window==top)r._$clearUnreadMsg(_.SHOPID)}else r._$clearUnreadMsg(_.SHOPID)};f.__iframeOpenClearUnread=function(){if(s._$isFrameModule()||_.isLayerOpen)r._$clearUnreadMsg(_.SHOPID)};f.__doMarqueeTitle=function(){var t;var e=function(){if(t)document.title=t.join("")};var i=function(){t.push(t.shift());e()};return function(n){if(this.__xtimer)window.clearInterval(this.__xtimer);t=n.split("");this.__xtimer=window.setInterval(i,500);e()}}();f.__doUnMarqueeTitle=function(){if(this.__xtimer){this.__xtimer=window.clearInterval(this.__xtimer);document.title=this.__title}};f.__onKickout=function(t){o._$alert({btnOK:{label:"重新咨询"},btnCC:{hidden:!0},message:"您已在其他页面发起咨询，当前咨询已失效，您可以重新发起咨询",onok:function(){location.reload()}})};f.__doParseParent=function(t){return i._$get("ysf-client")};c._$regist("layout",u)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","35df4ef4567b6cd0275a1b849d2bea8c","d252039c36767cb4f534ca3f91188796","972fe5ebc7a7940b3c06cefa017b585c","d67add781b37b82c1816b8c159701e56","aa835e6c54cfdee711ae8d0d1296fa57","4e09e3c278408cd8001c7779e34c93e9","8432624716159a6412219f26247c91bd");</textarea>
</div>
<div style="display:none" id="umi://trade/show/pc/index.html">
<textarea id="show-body" name="txt">
<div class="j-show">
<div class="body_hd">
<div class="j-flag-tlt right"></div>
<div class="j-flag-tlt left"></div>
</div>
<div class="body_bd">
<div class="j-flag g-chat j-chat"></div>
<div class="j-flag g-tab j-tab"></div>
</div>
</div>
</textarea>
<textarea name="js">I$("9547c7f754b31895329fbc513fec1625",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h,p){p=t._$klass();h=p._$extend(f._$$Module);h.__doBuild=function(){this.__super()};h.__onShow=function(t){this.__super(t)};h.__onRefresh=function(t){this.__super(t)};h.__onHide=function(){this.__super()};f._$regist("show",p)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","35df4ef4567b6cd0275a1b849d2bea8c","aa835e6c54cfdee711ae8d0d1296fa57","e4a45dc3cf399bf73004ce111fd4b206","d67add781b37b82c1816b8c159701e56","93872d9c4b2f20c68917dbdfa2b58e43","57b425e54e094947e45b4232d3c28d89","8fed76e567e32545928564a257a7dda4");</textarea>
</div>
<div style="display:none" id="umi://trade/chat/pc/index.html">
<textarea id="chat-body" name="txt">
<div class="g-chat-body">
<div class="chat_show j-chat-show">
<div class="chat_show_tip j-tip u-headtip"></div>
<div class="chat_show_loading u-errtip j-loading"><img src="https://qiyukf.nosdn.127.net/sdk/res/default/loading_3782900ab9d04a1465e574a7d50af408.gif"> 正在连接，请稍等...</div>
<div class="chat_show_msg j-chat">
<div class="msg-upscroll j-upscroll"></div>
<div class="m-msglist j-list"></div>
</div>
<div class="chat_show_bot j-flag-bot" ></div>
<div class="chat_show_editor j-editor z-robot"></div>
</div>
<div class="chat_leave j-leave"></div>
<div class="chat_logo j-qiyuInfo" data-action="toqiyu" onclick="window.open('https://www.qiyukf.com/');">
<img class="taillogo" src="https://qiyukf.nosdn.127.net/sdk/res/img/tailLogo@2x_51a85b19099da606135ca68d814c5d6e.png" alt="网易七鱼提供服务支持">
</div>
</div>
</textarea>
<textarea name="js">I$("0b8613625bee0baebd2cd625552996e5",'<textarea name="ntp" id="#<photoBody>">\n <div class="m-modal m-modal-confirm m-modal-confirmphoto">\n <div class="modal_dialog">\n <div class="modal_hd">\n <h3 class="modal_title">发送图片</h3>\n </div>\n <div class="modal_bd">\n <div class="content j-flag"></div>\n </div>\n <div class="modal_ft">\n <button class="u-btn ok j-flag">发送</button>\n <button class="u-btn-cancel cancel j-flag">取消</button>\n </div>\n </div>\n </div>\n<&#47;textarea>\n<textarea name="jst" id="#<photoList>">\n {list photos as x}\n {if x_length>1}\n <div class="photo-wrap" style="background-image:url(${x.url})">&nbsp;</div>\n {else}\n <div class="photo-wrap"><img src="${x.url}"/></div>\n {/if}\n {/list}\n<&#47;textarea>');I$("c1d55708b36e5cee72cf23349b7f94da",function(t,e,i,n,s,a,o,r,_,d){_._$$PhotoViewer=t._$klass();d=_._$$PhotoViewer._$extend(n._$$Abstract);d.__reset=function(t){this.__super(t);this.__doInitDomEvent([[this.__nok,"click",this.__onOK._$bind(this)],[this.__ncc,"click",this.__onCC._$bind(this)]]);this.__scrollbar=o._$$Scrollbar._$allocate({parent:this.__lbox});this.__list=t.photos||[];a._$render(this.__lbox,this.__seed_list,{photos:this.__list});this.__doUpdateClass(this.__list.length);this.__nok.focus()};d.__destroy=function(){this.__scrollbar._$recycle();this.__lbox.innerHTML="";delete this.__scrollbar;delete this.__list;this.__super()};d.__initXGui=function(){var t=s._$parseUITemplate(r);return function(){this.__seed_list=t.photoList;this.__seed_html=t.photoBody}}();d.__initNode=function(){this.__super();var t=e._$getByClassName(this.__body,"j-flag");this.__lbox=t[0];this.__nok=t[1];this.__ncc=t[2]};d.__doUpdateClass=function(){var t=["z-second","z-more"];return function(i){var n="";if(2==i)n=t[0];else if(i>2)n=t[1];e._$replaceClassName(this.__lbox.parentNode,t.join(" "),n)}}();d.__onOK=function(){this._$dispatchEvent("onok",{data:this.__list});this._$recycle()};d.__onCC=function(){this._$dispatchEvent("oncc");this._$recycle()};_._$preview=function(t){var e={parent:document.body};_._$$PhotoViewer._$allocate(i._$merge(e,t))}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","c711308f00adca75206c9dc3966a29d2","0b8613625bee0baebd2cd625552996e5");I$("efa8f80f50bf19cd666a7c9c8c38605f",'<textarea name="ntp" id="#<mdlBody>">\n<div class="m-modal m-modal-confirm m-modal-filetrans">\n <div class="modal_dialog">\n <div class="modal_hd">\n <h3 class="modal_title">发送文件</h3>\n </div>\n <div class="modal_bd">\n\t\t\t<ul class="file-list"></ul>\n </div>\n <div class="modal_ft">\n <button class="u-btn ok">确定</button>\n <button class="u-btn u-btn-cancel cancel">取消</button>\n <div class="u-error">\n \t<span class="error-msg"></span>\n </div>\n </div>\n </div>\n</div>\n<&#47;textarea>\n\n<textarea name="jst" id="#<fileList>">\n\t{list files as file}\n\t\t<li class="file-item {if file.overSize || file.isZero}z-disabled{/if}">\n\t\t\t<i class="u-icon-${file.name|spliceSuffix} icon"></i>\n\t\t\t<span class="name">${file.name}</span>\n\t\t\t<span class="size">${file.size|fileSizeFormat}</span>\n {if file.overSize}\n <span class="file-error">大于100MB无法发送</span>\n {elseif file.isZero}\n <span class="file-error">空文件无法发送</span>\n {/if}\n\t\t</li>\n\t{/list}\n<&#47;textarea>\n');I$("0601a0c5ba07e512639f37a3e3c53ba0",function(t,e,i,n,s,a,o,r,_,d,c){d._$$FileModal=t._$klass();c=d._$$FileModal._$extend(s._$$Abstract);c.__init=function(t){this.__super(t);r._$extend({fileSizeFormat:a._$fileSizeFormat,spliceSuffix:a._$spliceSuffix})};c.__reset=function(t){this.__super(t);this.__data=n._$merge({max:9,files:[],isValid:!1},t);this.__data.originFiles=this.__data.files;this.__data.files=Array.prototype.slice.call(this.__data.files);var e=this.__data.files,i=this.__data.max;if(e.length>i)e.splice(i);n._$forEach(e,function(t){if("INPUT"==t.tagName&&t.value)t.name=t.value.match(/[^\/\\]+$/);t.isZero=t.size<=0?!0:!1;t.overSize=t.size>100*Math.pow(1024,2)?!0:!1});this.__onCanSendFile({result:t.canSend});this.__doInitDomEvent([[this.__nok,"click",this.__onOK._$bind(this)],[this.__ncancel,"click",this.__onCancel._$bind(this)]]);this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this));this.__nok.focus();this.__render()};c.__destroy=function(){this.__super()};c.__initXGui=function(){var t=o._$parseUITemplate(_);return function(){this.__seed_html=t.mdlBody;this.__list_html=t.fileList}}();c.__initNode=function(){this.__super();this.__ntlt=e._$getByClassName(this.__body,"modal_title")[0];this.__nok=e._$getByClassName(this.__body,"ok")[0];this.__ncancel=e._$getByClassName(this.__body,"cancel")[0];this.__nlist=e._$getByClassName(this.__body,"file-list")[0];this.__nerror=e._$getByClassName(this.__body,"u-error")[0]};c.__render=function(){r._$render(this.__nlist,this.__list_html,this.__data)};c.__onOK=function(t){if(this.__data.isValid){var e=this.__getValidateFiles();this._$dispatchEvent("onok",t,e);this._$recycle()}};c.__onCancel=function(t){this._$dispatchEvent("oncancel",t);this._$recycle()};c.__onCanSendFile=function(t){this.__data.canSend=t.result;this.__validate()};c.__getValidateFiles=function(){var t=[];n._$forEach(this.__data.files,function(e){if(!e.overSize&&!e.isZero)t.push(e)});return t};c.__validate=function(){if(this.__getValidateFiles().length>0&&this.__data.canSend){this.__data.isValid=!0;this._$enableOk()}else{this.__data.isValid=!1;this._$disableOk()}var t="";if(0==this.__data.canSend)t="您同一时间段发送文件过多，请稍后再试";else if(this.__data.originFiles.length>this.__data.max)t="一次仅可发送前"+this.__data.max+"个文件";this.__nerror.innerText=t};c._$disableOk=function(){e._$attr(this.__nok,"disabled",!0);e._$addClassName(this.__nok,"z-disabled");e._$style(this.__nok,{color:"#fff"})};c._$enableOk=function(){this.__nok.removeAttribute("disabled");e._$delClassName(this.__nok,"z-disabled");e._$style(this.__nok,{color:"#fff"})}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","35df4ef4567b6cd0275a1b849d2bea8c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","efa8f80f50bf19cd666a7c9c8c38605f");I$("bad45afa5ce71bf8cd6e713026c82970",function(t,e){var i={};var n=0;e._$getCache=function(t){return i[t]};e._$setCache=function(t,e){i[t]=e};e._$parseTemplate=function(t){var i=e._$getTemplateType(t);switch(i){case"order_list":return e.__parseListTemplate(t);case"order_detail":return e.__parseDetailTemplate(t);case"order_logistic":return e.__parseFlowTemplate(t);case"order_status":return e.__parseStatusTemplate(t)}};e._$getTemplateType=function(t){var e=new DOMParser,i=e.parseFromString(t,"text/xml");return i.querySelector("template").getAttribute("id")};e.__parseListTemplate=function(t){var i=e.__botXmlParser(t),n={title:"",content:{list:[]}};var s=i.getLinks();n.title=i.getTextVal(null,"label");n.status=100;if(!(s.length<1)){for(var a=0;a<s.length;a++){var o=s[a];if("block"==o.getAttribute("type"))n.content.list.push({target:o.getAttribute("target"),params:o.getAttribute("params"),image:i.getImageUrl(o),title:i.getTextVal(o,"p_name"),price:i.getTextVal(o,"p_price"),number:i.getTextVal(o,"p_count"),statusInfo:i.getTextVal(o,"p_status"),status:100})}e._$setCache("list",n);return n}else console.error("parse list template is error",s)};e.__parseDetailTemplate=function(t){var i=e.__botXmlParser(t),n={title:"",content:{list:[]}};var s=i.getLayouts();if(!(s.length<2)){n.title=i.getTextVal(s[0],"label");n.status=400;for(var a=1;a<s.length;a++){var o=s[a];n.content.list.push({label:i.getTextVal(o,"label"),value:i.getTextVal(o,"value")})}e._$setCache("detail",n);return n}else console.error("parse detail template is error",s)};e.__parseFlowTemplate=function(t){var i=e.__botXmlParser(t),n={title:"",content:{list:[]}};var s=i.getLayouts();if(!(s.length<2)){n.title=i.getTextVal(s[0],"label");n.status=300;for(var a=1;a<s.length;a++){var o=s[a];n.content.list.push({value:i.getTextVal(o,"logistic"),timestamp:i.getTextVal(o,"timestamp")})}e._$setCache("flow",n);return n}else console.error("parse detail template is error",s)};e.__parseStatusTemplate=function(t){var i=e.__botXmlParser(t),n={title:"",content:{list:[]}};var s=i.getLinks();var a=i.getLayouts();if(!(a.length<3||s.length<1)){n.title=i.getTextVal(a[0],"label")+i.getTextVal(a[1],"label");n.status=200;for(var o=0;o<s.length;o++){var r=s[o];n.content.list.push({target:r.getAttribute("target"),params:r.getAttribute("params")||"",info:i.getTextVal(r,"valid_operation")})}e._$setCache("status",n);return n}else console.error("parse status template is error",a,s)};e.__botXmlParser=function(t){var e=new DOMParser;var i=e.parseFromString(t,"text/xml");return{getLayouts:function(){return i.querySelectorAll("LinearLayout")||[]},getLinks:function(t){t=t||i;return t.querySelectorAll("link")},getTextVal:function(t,e){t=t||i;var n=t.querySelector("text[name="+e+"]");return n?n.textContent:""},getImageUrl:function(t){t=t||i;return t.querySelector("image").getAttribute("url")}}};e._$openSwitch=function(){n=1};e._$getSwitchStatus=function(){return n}},"fbbf6ddc0634989027d138f4ffd4b78b");I$("cc7bc4a298ada69b7bf2d8371bd44932",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h,p){var m=window.setting||{};if(window.debug)var g=window.debug("visitorSession:push");var b;var v={client_input:{"switch":1,sendingRate:"1.5"},input_assciation_permisson:{"switch":0,sendingRate:"0.5"},client_read:{"switch":1}};var $=[];window.msgQueue=$;var y=function(t){for(var e=0;e<$.length;e++)if($[e]==t)return!0;return!1};var x=function(){var t=!1;t=window.screenTop<-3e4&&window.screenLeft<-3e4;
return t};c._$config({"user-add":{domain:window.setting.getKefuDomain,url:"/webapi/user/create.action",format:function(t,e){var i=t.info;t.result={token:i.token,account:i.accid,exchange:i.exchange};g&&g("[cbUserCreate] data:%O",{params:e.data,storage:i.storage});this.__setRemoteStorage(i.storage,e.data.appkey)},onerror:function(t,e){var i="";d._$error("httpRequestError",n._$merge({url:"/webapi/user/create.action"},e,t));if(1002==t.code||1003==t.code||1001==t.code){switch(t.code){case 1001:i="企业Appkey不存在";break;case 1002:i="帐户不合法";break;case 1003:i="系统错误"}this._$dispatchEvent("onusererror",i)}else this.__cbCreateYXUser(e.data.appkey,null);return!0}},"user-push-add":{domain:window.setting.getKefuDomain,url:"/webapi/user/create.action",format:function(t){var e=t.info;t.result={token:e.token,account:e.accid,exchange:e.exchange}}},"user-evaluate":{url:"/webapi/user/evaluate.action",format:function(t){t.result={code:t.code,desc:t.desc}}}});var w={NULL:0,INIT:1,CONNECTED:2};p=t._$klass();u=p._$extend(c._$$Cache);u.__init=function(){this.__step=2;this.__count=0;this.__state=w.NULL;this.__nopt={db:!1,debug:window.MIN_DEBUG_MODE,syncTeams:!1,syncFriends:!1,syncRoamingMsgs:!1,syncTeamMembers:!1,syncRelations:!1,syncFilter:!0,lbsUrl:window.MIN_LBS,onmsg:this.__cbReceiveMessage._$bind(this),onerror:this.__onConnectError._$bind(this),onconnect:this.__cbConnect2Yunxin._$bind(this),ondisconnect:this.__onDisConnect._$bind(this),oncustomsysmsg:this.__onReceiveInstr._$bind(this)};this.__evalBox={};this.__sesTokenMap={};this.__floatingLayerMark=n._$uniqueID();this.__splitmsgCache={};this.__botCache={};this.__super()};u.__doResetTimeout=function(){this.__count=0;return this.__count};u.__getNextTimeout=function(){var t=1e3*(this.__step+this.__step*this.__count);this.__count++;return t};u.__getDeviceID=function(){return m.fid||m.device};u.__getUserInfo=function(){var t=this.__getDataInCache("yunxin-user");if(window.localStorage){var e="X-"+t.appKey.toUpperCase()+"-YSF-INFO",i=localStorage.getItem(e);if(!i)return;var s=n._$query2object(i);if(s.uid)t.fid=s.uid;s.source=i;return s}};u.__getForeignInfo=function(t){var e={email:"email",real_name:"name",mobile_phone:"mobile",avator:"avator"},i=JSON.parse(t.profile||"null")||[];n._$forEach(i,function(i){var n=e[i.key];if(n){delete e[i.key];i.value=i.value||t[n]||m[n]||""}});n._$loop(e,function(e,n){var s=t[e]||m[e];if(null!=s)i.unshift({key:n,value:s})});return i};u.__getMessageBody=function(t){return{time:t.time,id:t.idServer,sid:this._$getSessionID(),msgIdClient:t.idClient,from:this._$getKefu(),to:{id:t.to}}};u.__onConnectError=function(){var t={302:function(){this._$dispatchEvent("onusererror")}};return function(e){var i=t[e.code];if(n._$isFunction(i))i.call(this);else if(n._$isString(i))t[i].call(this);d._$error("onConnectError",e)}}();u.__doCreateYXUser=function(t){var e=this.__getDataInCache("yunxin-user");this.__offlineAckTimer=setInterval(function(){this.__setAckDvc(t);this.__setAckTime(t)}._$bind(this),2e3);if(!e){var e={deviceid:this.__getDeviceID(t),appkey:t||"",token:m.uuid||""};if(m.bid&&m.bid!=-1)e.bid=m.bid;this.__doSendRequest("user-add",{data:e,onload:this.__cbCreateYXUser._$bind(this,t)})}else this.__cbCreateYXUser(t,e)};u.__cbCreateYXUser=function(t,e){if(e){n._$merge(window.logSetting,{token:e.token,account:e.account});this.__setDataInCache("yunxin-user",e);this.__setDataInCache("corp-appkey",t);this.__doResetTimeout();e.appKey=t;e.exchange=e.exchange||[-1];e=n._$merge({},e,this.__nopt);window.nim=this.__nim=new NIM(e)}else window.setTimeout(this.__doCreateYXUser._$bind(this,t),this.__getNextTimeout())};u.__cbConnect2Yunxin=function(t){d._$info("__cbConnect2Yunxin",t);n._$merge(t,{staffid:m.staffid||0,groupid:m.groupid||0,qtype:m.qtype||0,welcomeTemplateId:m.welcomeTemplateId||0,robotShuntSwitch:m.robotShuntSwitch||0,robotId:m.robotId});var e=this.__getDataInCache("yunxin-user"),i=this.__getUserInfo()||{},s=e.exchange[0];e.ip=e.ip||t.ip||"";if(this.__ktimer)window.clearTimeout(this.__ktimer);this.__ktimer=window.setTimeout(this.__doCheckKefuFail._$bind(this),15e3);var a=this.__tmpOnly2kefu;delete this.__tmpOnly2kefu;if(a)t.type=1;var o=n._$query2object(location.search.substr(1));var r;if(o.t)try{r=decodeURIComponent(o.t)}catch(_){r=o.t}this.__nim.sendCustomSysMsg({to:s,cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:1,deviceid:i.fid||this.__getDeviceID(),exchange:s,foreignid:i.fid||m.fid||"",msgToken:this._$getSeqOfHistoryLoad(),fromTitle:i.title||r||"未知页面名称",fromPage:i.referrer||document.referrer,fromType:"WEB",fromIp:e.ip,fromSubType:[navigator.platform||"",navigator.userAgent||""].join(" - "),version:"7",stafftype:t.type||0,staffid:t.staffid||0,groupid:t.groupid||0,entryid:t.entryid||0,level:i.level||0,qtype:t.qtype||0,welcomeTemplateId:t.welcomeTemplateId||0,authToken:i.authToken||0,robotShuntSwitch:t.robotShuntSwitch||0,landPage:i.landPage||"",landPageTitle:i.landPageTitle||"",landPageReferrer:i.landPageReferrer||"",sessionInfo:i.sessionInfo,templateId:m.templateId||0,robotId:t.robotId||0}),done:function(e,i){if(e){window.setTimeout(this.__cbConnect2Yunxin._$bind(this,t),this.__getNextTimeout());d._$error("cbConnect2Yunxin",n._$merge({cmd:1},e))}}._$bind(this)})};u.__doCheckKefuFail=function(){if(!this.__isShuntFlow)this.__cbAllocateKefu({code:-1},{time:+new Date})};u.__cbAllocateKefu=function(){var t=function(t,e){var i=this._$getAppkey();if(t)clearTimeout(t);return setInterval(function(){try{var t=JSON.parse(localStorage.getItem(("YSF-SATISFY-"+i+"-"+e).toUpperCase())||"{}");if(!y(e)&&t.name){$.push(e);this._$dispatchEvent("onevalresult",{content:t.name});this._$dispatchEvent("onevalresultmsg",{content:t.name,sid:t.sid})}}catch(n){console.error("time:",+new Date)}}._$bind(this),2e3)};var e={200:function(e,i){this.__satifyTimer=t.call(this,this.__satifyTimer,this.__sessionId);this.__sesTokenMap[e.sessionid]=e.session_token;var s=this.__getDataInCache("yunxin-kefu");if(this.__sessionId==e.sessionid&&s&&!s.isQueue){var a=!0;this._$dispatchEvent("onsamesession",e)}this.__sessionId=e.sessionid;if(1==e.stafftype)e.iconurl=e.iconurl||"";else e.iconurl=e.iconurl||m.portrait||"";if(~e.iconurl.indexOf("nos.netease.com")||~e.iconurl.indexOf("nosdn.127.net"))e.iconurl+="?imageView&type=png|imageView&thumbnail=76y76&axis=5";this.__doClearQueueCheck();this.__setDataInCache("yunxin-kefu",e);this.__setDataInCache("evaluation",n._$merge(JSON.parse(e.evaluation||"{}"),{id:n._$uniqueID(),sid:this.__sessionId,enable_evaluation_muttimes:e.shop.setting.enable_evaluation_muttimes,evaluation_timeout:e.shop.setting.evaluation_timeout}));try{this.staffReadSwitch=JSON.parse(i.content||"{}").shop.setting.staffReadSwitch}catch(o){}this.__state=w.CONNECTED;this._$dispatchEvent("onconnect",{time:i.time,id:e.staffid,sid:e.sessionid,nickname:e.staffname,isRobot:1==e.stafftype,groupname:e.groupname,hasKefuEntry:1==e.operator_enable,hasEvaluated:0==e.evaluation_enable,welcome:e.message||"",isSameSession:!!a,botEntries:e.bot,setting:e.shop.setting});if(this.__xtimer)window.clearInterval(this.__xtimer);this.__xtimer=window.setInterval(this.__doCheckUserChange._$bind(this),500);v["client_input"]={"switch":1,sendingRate:"1.5"};this._$dispatchEvent("onconfig",{type:"client_input",config:v["client_input"]})},201:function(t,e){this.__doClearQueueCheck();this.__state=w.CONNECTED;this._$dispatchEvent("onnokefu",t)},205:function(t,e){this._$dispatchEvent("onnokefunoleave",t)},203:function(t,e){this.__sessionId=t.sessionid;if(t.robotSessionId)this.__robotSessionId=t.robotSessionId;if(~t.iconurl.indexOf("nos.netease.com")||~t.iconurl.indexOf("nosdn.127.net"))t.iconurl+="?imageView&type=png|imageView&thumbnail=76y76&axis=5";this.__setDataInCache("yunxin-kefu",n._$merge({isQueue:!0},t));this.__doClearQueueCheck();this.__qtimer=window.setInterval(this.__doCheckQueue._$bind(this),1e4);this._$dispatchEvent("onqueuestart",t);this.staffReadSwitch=0},x:function(t,e,i){this.__doClearQueueCheck();this.__state=w.NULL;this._$dispatchEvent(i,t);this.__nim.disconnect()}};return function(t,i){d._$info("__cbAllocateKefu",{data:t,msg:i});if(this.__ktimer)this.__ktimer=window.clearTimeout(this.__ktimer);var s=e[t.code];if(n._$isFunction(s))s.call(this,t,i);else e.x.call(this,t,i,"onkefuerror")}}();u.__clearUnreadMessage=function(t){if(this._$canSendMessage())if(0!=v["client_read"]["switch"]){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:500,sessionid:t}),done:function(t,e){if(t)d._$error("_$clearUnreadMessage",t)}})}};u.__doCheckQueue=function(){var t=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({cc:!0,filter:!0,scene:"p2p",to:t.exchange[0],content:JSON.stringify({cmd:16,deviceid:this.__getDeviceID()}),done:function(t,e){if(t)d._$error("doCheckQueue",n._$merge({cmd:16},t))}})};u.__doClearQueueCheck=function(){if(this.__qtimer)this.__qtimer=window.clearInterval(this.__qtimer)};u._$quitQueue=function(t){this.__doClearQueueCheck();var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({cc:!0,filter:!0,scene:"p2p",to:e.exchange[0],content:JSON.stringify({cmd:26,sessionid:t}),done:function(t,e){if(t)d._$error("quitQueue",n._$merge({cmd:26},t))}})};u.__onReceiveInstr=function(){var t=function(t,e){var i={image:"file",audio:"file",video:"file",file:"file"};var e={type:t.type,time:e.time,msgIdClient:this._$getSessionID()+"#"+e.idClient,fromUser:e.fromUser,from:{id:-72},id:e.idServer,sid:e.isOffline?-100:this._$getSessionID(),to:{id:e.to}};return n._$merge(e,{content:i[t.type]?t.attach:t.attach.msg})};var e={"-1000":function(t,e){var i=1==t.fromtype?!0:!1;delete t.fromtype;var s=this.__getDataInCache("yunxin-kefu")||{};if(1!=s.stafftype&&t.sessionid==s.sessionid)this.__nim.sendCustomSysMsg({cc:i,filter:!0,to:e.from,scene:"p2p",content:JSON.stringify(t),done:function(t,e){if(t)d._$error("recieveInstr",n._$merge({cmd:1e3},t))}})},2:function(t,e){if(this.__botCache&&this.__botCache.length>0)n._$merge(t,{
bot:this.__botCache});if(0==b){b=1;this._$dispatchEvent("onshuntstatus",t)}this.__cbAllocateKefu(t,e)},90:function(t,e){if(t.entries){this.__isShuntFlow=!0;var i=JSON.parse(t.entries),s=this.__getDataInCache("yunxin-kefu");this._$dispatchEvent("onshunt");this._$dispatchEvent("shuntentries",{entries:i,from:n._$merge(this._$getKefu(),{portrait:t.iconurl}),label:t.message})}},6:function(t,e){if(t.sessionid==this.__sessionId){var i=this.__getDataInCache("yunxin-kefu");var n=this.__evalBox[t.sessionid];var s={closeReason:t["close_reason"],evaluate:t.evaluate,message:t["message"],session_end_switch:i.shop.setting.session_end_switch,session_timeout_switch:i.shop.setting.session_timeout_switch};this._$keepConnection=t.keep_connection;this.__doDisConnect(s,this._$keepConnection);if(1==t.evaluate&&!n)this._$dispatchEvent("oneval",{autoPopup:t["evaluation_auto_popup"],messageInvite:this._$getEvaluation().messageInvite})}},50:function(t,e){this._$dispatchEvent("oneval",{autoPopup:t["evaluation_auto_popup"],messageInvite:t.message})},15:function(t,e){if(200!=t.code){if(302==t.code||303==t.code)this._$dispatchEvent("onqueuefail",t);this.__doClearQueueCheck()}else this._$dispatchEvent("onqueuechange",{showNum:t.showNum,before:t.before,inqueueNotify:t.inqueueNotify})},17:function(t,e){},60:function(t,e){var i=_._$parse(t);n._$forEach(i,function(t){var i=this.__getMessageBody(e);i.id=i.msgIdClient;this._$dispatchEvent("onmessage",n._$merge(i,t))},this)},70:function(t,e){this._$dispatchEvent("onovertime",{msg:t.message,time:t.timestamp})},95:function(t,e){this._$setSessionID(t.sessionid);this.__sesTokenMap[t.sessionid]=t.session_token;this.__sessionId=t.sessionid;var i=this.__getDataInCache("yunxin-kefu");this.__updateKefuName(t.staffname);var n=t.iconurl;if(~n.indexOf("nos.netease.com")||~n.indexOf("nosdn.127.net"))n+="?imageView&type=png|imageView&thumbnail=76y76&axis=5";this.__updataKefu("iconurl",n);this._$dispatchEvent("ontransferresult",{sessionId:t.sessionid,staffId:t.staffid,staffName:t.staffname||"",welcome:t.message||"",session_transfer_switch:i.shop.setting.session_transfer_switch})},72:function(e,i){var s={question:function(e,i){if(!y(i.idClient)){e.type="text";this._$dispatchEvent("onmessage",t.call(this,e,i))}},robot:function(t,e){var i={id:t.attach.msgidClient,evaluation:t.attach.evaluation};if(t.attach.evaluation_content)i.evalcontent=t.attach.evaluation_content;if(!t.attach.floating_layer_mark||t.attach.floating_layer_mark!=this.__floatingLayerMark)this._$dispatchEvent("onrobotanswerevalresult",i)}};n._$merge(i,{fromUser:1});if(s[e.type])s[e.type].call(this,e,i);else this._$dispatchEvent("onmessage",t.call(this,e,i))},134:function(t,e){var i={type:"push-msg",msgType:e.type,msgSessionId:e.ext.msgSessionId,content:e.text,from:this._$getKefu(),id:e.idServer,msgIdClient:e.idClient};var s=1,a=1;if(!this._$chatNoKefu){if(!document.hidden&&!x()&&1==this.__sdkWindowStatus){this._$sendPushMsgStatus(2,[i.msgSessionId]);a=0}if(1==this._$hasList){this._$dispatchEvent("onmessage",i);s=0}this._$dispatchEvent("onpushmessage",n._$merge(i,{append:s,sdkAppend:a}))}},203:function(t,e){var i=this.__getMessageBody(e);this._$dispatchEvent("receivethirdorder",n._$merge(i,{content:t}))},104:function(t){var e=this.__getDataInCache("yunxin-user");if(t.fromIp==e.ip)this._$dispatchEvent("oncansendfile",{timestamp:t.timestamp,result:t.result})},205:function(t){var e=t.template.id;if("order_list"==e||"card_layout"==e)this._$dispatchEvent("onmorebotlist",null,t);else if("pair"==e)this._$dispatchEvent("onmorebotdetail",null,t)},41:function(t){var e=t.message;if(0==t.result){this._$dispatchEvent("onusererror",e);if(this.__ktimer)this.__ktimer=window.clearTimeout(this.__ktimer)}},65:function(t,e){var e={type:"rich",time:e.time,msgIdClient:e.idClient,fromUser:e.fromUser,from:this._$getKefu(),id:e.idServer,sid:e.isOffline?-100:this._$getSessionID(),to:{id:e.to},content:t.content};this._$dispatchEvent("onmessage",e)},57:function(t,e){v[t.type]=t.config;this._$dispatchEvent("onconfig",t)},23:function(t,e){var i={"switch":t["switch"],sendingRate:t.sendingRate};v["input_assciation_permisson"]=i;var n={sessionid:t.sessionid,"switch":t["switch"],sendingRate:t.sendingRate,type:"input_assciation_permisson"};this._$dispatchEvent("onconfig",n)},25:function(t,e){this._$dispatchEvent("oninputassociation",t)},42:function(t,e){this._$dispatchEvent("onmsgtrashed",t)},405:function(t,e){var i=t.split_index;var s=t.split_id;var a=t.split_content||"";var o=t.msg_id||"";if(!this.__splitmsgCache[s])this.__splitmsgCache[s]={};this.__splitmsgCache[s][i]=a;if(t.split_count==n._$objectSize(this.__splitmsgCache[s])){var r="";for(var _=0;_<t.split_count;_++){var d=this.__splitmsgCache[s][_]?this.__splitmsgCache[s][_]:"";r+=d}var c=e;c.content=l._$b642str(r);c.idClient=o;this.__onReceiveInstr(c);delete this.__splitmsgCache[s]}},87:function(t,e){if(t.auditResult)var i={trashWords:t.trashWords};this._$dispatchEvent("onleavesend",{error:i})},121:function(t,e){var i,s=[];var a={title:t.title,desc:t.desc,picture:t.picture,url:t.url,note:t.note,activity:t.activity,activityHref:t.activityHref,productType:t.productType,showCustomMsg:t.showCustomMsg,orderId:t.orderId,orderTime:t.orderTime,orderSku:t.orderSku,orderCount:t.orderCount,orderStatus:t.orderStatus,payMoney:t.payMoney,price:t.price,template:t.template,product:{tags:[]}};if(t.tags){if(n._$isArray(t.tags))i=t.tags;else try{i=JSON.parse(t.tags)}catch(o){}if(n._$isArray(i)){if(i.length>3)i=i.slice(0,3);n._$forEach(i,function(t){if(t.label){if(t.label.length>8)t.label=t.label.substr(0,8);if(t.data)t.data=JSON.stringify(t.data);s.push(t)}},this);n._$merge(a.product,{tags:s})}}this._$dispatchEvent("onproductinfo",{id:e.idClient,msgIdClient:e.idClient,sid:t.sessionid,fromUser:0,data:a,type:"productinfo",from:this._$getKefu()})},211:function(t,e){this.__botCache=t.bot||[];this._$dispatchEvent("onbotentry",t.bot)},9:function(t){this._$dispatchEvent("onmessagereceipt",t)},28:function(t){t.msgIdClient=t.msgidClient;this._$dispatchEvent("onmsgwithdraw",t)}};e["17"]=e["6"];return function(t,i,s){d._$info("__onReceiveInstr",{msg:t,cmd:s});var a=t.content||"";try{a=JSON.parse(a);if(i&&!i[a.cmd]&&!s)return}catch(o){}var r=e[a.cmd||s];if(n._$isFunction(r))r.call(this,a,t)}}();u.__cbReceiveMessage=function(){var t={image:"file",audio:"file",video:"file"};var e={60:!0,90:!0,95:!0,72:!0,203:!0,205:!0,65:!0,121:!0};var i={2:134};return function(s,a){g&&g("[recieveMessage] msg:%O",s);if("custom"!=s.type)if(!/##/gi.test(s.idClient)){d._$info("recievemessage",s);g&&g("[dispatch message]");this._$dispatchEvent("onmessage",{type:s.type,time:s.time,id:s.idServer,sid:a?-100:this._$getSessionID(),content:s[t[s.type]||s.type],from:a?{id:-100}:this._$getKefu(),to:{id:s.to},msgIdClient:s.idClient})}else{var o=s.idClient.split("##"),r=o[0],_=o[1];n._$merge(s,{ext:{type:_,msgSessionId:r}});this.__onReceiveInstr(s,e,i[s.ext.type])}else{s.isOffline=a;this.__onReceiveInstr(s,e)}}}();u.__doDisConnect=function(t,e){this.__state=w.NULL;var i=n._$merge({time:+new Date},t);this.__delDataInCache("yunxin-kefu");this._$dispatchEvent("onfinish",i);if(1!=e)this.__nim.disconnect();this.__clearPrdStorage()};u.__onDisConnect=function(t){d._$error("__onDisConnect",t);this.__doClearQueueCheck();this.__delDataInCache("yunxin-kefu");if(this.__xtimer)this.__xtimer=window.clearInterval(this.__xtimer);if(this.__offlineAckTimer)this.__offlineAckTimer=window.clearInterval(this.__offlineAckTimer);if(this.__state!==w.NULL){this.__state=w.NULL;if(t.kicked)this._$dispatchEvent("onkickout");else this._$dispatchEvent("ondisconnect")}};u.__doCheckUserChange=function(){var t=this.__getUserInfo(),e=this;if(t)if(this.__last!=t.source){this.__last=t.source;var i=this.__getDataInCache("yunxin-user"),s=i.exchange[0];this.__nim.sendCustomSysMsg({to:s,cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:52,foreignid:t.uid,userinfo:JSON.stringify(this.__getForeignInfo(t)),authToken:t.authToken||0}),done:function(t,e){if(t)d._$error("doCheckUserChange",n._$merge({cmd:52},t))}});g&&g("[reportCrm] content:%O",{cmd:52,foreignid:t.uid,userinfo:this.__getForeignInfo(t),authToken:t.authToken||0})}};u.__setRemoteStorage=function(t,i){var s={userInfo:function(){var s=e._$text2type(t.userInfo,"json");s=n._$object2query(s);var a="X-"+i.toUpperCase()+"-YSF-INFO";window.localStorage.setItem(a,s)},orderInfo:function(){var s=e._$text2type(t.orderInfo,"json");s=n._$object2query(s);var a="X-"+i.toUpperCase()+"-YSF-PRODUCT";window.localStorage.setItem(a,s)},analyticInfo:function(){var s=e._$text2type(t.analyticInfo,"json");s=n._$object2query(s);var a="X-"+i.toUpperCase()+"-YSF-WEBANALYTICS";window.localStorage.setItem(a,s)}};if(t)n._$loop(t,function(t,e){var i=s[e];if(i&&n._$isFunction(i))i.apply(this)}._$bind(this))};u._$getVisitor=function(){var t=this.__getDataInCache("yunxin-user");return{id:t.account}};u._$getAppkey=function(){return m.appkey||this.__getDataInCache("corp-appkey")};u._$getPrdKey=function(){return"X-"+this._$getAppkey().toUpperCase()+"-YSF-PRODUCT"};u._$getKefu=function(){var t=this.__getDataInCache("yunxin-kefu");if(!t)return{};else return{id:t.staffid,portrait:t.iconurl,nickname:t.staffname}};u._$getEvaluation=function(){return this.__getDataInCache("evaluation")||{}};u._$getSessionID=function(){return this.__sessionId||(this.__getDataInCache("yunxin-kefu")||{}).sessionid};u._$getRobotSessionID=function(){return this.__robotSessionId||""};u._$setSessionID=function(t){(this.__getDataInCache("yunxin-kefu")||{}).sessionid=t};u.__updateKefuName=function(t){(this.__getDataInCache("yunxin-kefu")||{}).staffname=t};u.__updataKefu=function(t,e){var i=this.__getDataInCache("yunxin-kefu")||{};i[t]=e};u._$isRobot=function(){var t=this.__getDataInCache("yunxin-kefu")||{};return 1==t.stafftype||1==t.robotInQueue};u._$connect=function(t,e,i){if(window.nim){window.nim.disconnect();delete window.nim}if(t.appkey||t.token){if(this.__state===w.NULL){this.__state=w.INIT;this.__doResetTimeout();t=t||{};this.__tmpOnly2kefu=e;
if(i)this._$dispatchEvent("reconnect");if(!t.token)this.__doCreateYXUser(t.appkey);else this.__cbCreateYXUser(t.appkey,t)}}else this._$dispatchEvent("onusererror")};u._$pushMsgConnect=function(t,e,i){if(window.nim){window.nim.disconnect();delete window.nim}this.__doSendRequest("user-push-add",{data:{deviceid:this.__getDeviceID(),appkey:t||""},onload:function(s){s.appKey=t;s.exchange=s.exchange||[-1];s=n._$merge({},s,this.__nopt,{onerror:function(){},onconnect:function(){this._$sendPushMsg(e,i)}._$bind(this),ondisconnect:function(){},oncustomsysmsg:function(){}});window.nim=this.__nim=new NIM(s)}._$bind(this)})};u._$isInQueue=function(){return!!this.__qtimer};u._$canSendMessage=function(){return this._$isInQueue()||this.__state===w.CONNECTED};u._$isDelay=function(){return!!this.__delay};u._$sendMessage=function(){var t=function(t){var e={c:t.content.file,m:"sendFile"};var i=t.content.file;if(n._$isString(i))if(0===i.indexOf("data:image"))e.r="dataURL";else{e.r="file";e.c={url:i,size:1,md5:i,ext:"png",w:1,h:1}}else if("INPUT"===i.tagName)e.r="fileInput";else if(i.md5)e.r="file";else e.r="blob";return e};var e=function(t){var e={"crm-thirdorder":202};n._$merge(t.content,{cmd:e[t.type]});var i={m:"sendCustomMsg",r:"content",c:JSON.stringify(t.content)};return i};var i={image:t,audio:t,video:t,file:t,geo:{m:"sendGeo",r:"geo"},text:{m:"sendText",r:"text"},"crm-thirdorder":e};return function(t){if(this._$canSendMessage()){var e=i[t.type];if(n._$isFunction(e))e=e.call(this,t);if(e){var s=this.__getDataInCache("yunxin-user"),a=n._$merge({cc:!0,filter:!0,scene:"p2p",to:s.exchange[0]},t);a[e.r]=e.c||a.content;if("content"!=e.r)delete a.content;d._$info("_$sendMessage",a);return this.__nim[e.m](a)}else(t.done||h)({code:-2,message:"消息类型不支持"})}else(t.done||h)({code:-1,message:"长连接未建立"})}}();u._$updateEvaluate=function(t,e,i,n,s){t=parseInt(t,10);var a=this.__sesTokenMap[t];if(a){this.__evalBox[t]=!0;$.push(t);this.__doSendRequest("user-evaluate",{data:{appkey:this._$getAppkey(),sessionid:t,session_token:a,evaluation:e,fromtype:"web",remarks:encodeURIComponent(i),tagList:encodeURIComponent(JSON.stringify(n))},onload:function(){var n={sid:t,value:e,name:s,remarks:i};if(window.localStorage)window.localStorage.setItem(("YSF-SATISFY-"+this._$getAppkey()+"-"+t).toUpperCase(),JSON.stringify(n))},onerror:function(){d._$error("_$updateEvaluate",{sid:t,value:e,remarks:i,tagList:n});window.setTimeout(this._$updateEvaluate._$bind(this,t,e,i,n,s),1e4)}._$bind(this)})}};u._$syncRobot=function(t){if(this._$canSendMessage()){var e=this.__getDataInCache("yunxin-user"),i=this.__getDataInCache("yunxin-kefu"),s=n._$merge({cmd:61},t);this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify(s),done:function(e){if(e){window.setTimeout(this._$syncRobot._$bind(this,t),1e4);d._$error("syncRobot",n._$merge({cmd:61},e))}}._$bind(this)})}};u._$syncRobotEx=function(t){var e={matched_question:"question",id:"questionid"};var i=function(t){var i={};for(var n in t)if(e[n])i[e[n]]=t[n];else i[n]=t[n];return i};if(this._$canSendMessage()){var s=this.__getDataInCache("yunxin-user"),a=this.__getDataInCache("yunxin-kefu"),o=n._$uniqueID(),r=n._$merge({cmd:63},i(t),{msgIdClient:o});this.__nim.sendCustomSysMsg({to:s.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify(r),done:function(e,i){if(!e)$.push(o);else{window.setTimeout(this._$syncRobotEx._$bind(this,t),1e4);d._$error("syncRobotEx",n._$merge({cmd:63},e))}}._$bind(this)})}};u._$action=function(){var t={kefu:function(t){if(this._$isRobot())this.__cbConnect2Yunxin({type:1})}};return function(e,i){var s=t[e];if(n._$isFunction(s)){d._$info("_$action",{action:e,data:i});s.call(this,i)}}}();u._$sendOfflineMessage=function(t){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({cc:!0,filter:!0,scene:"p2p",to:e.exchange[0],content:JSON.stringify({cmd:83,message:t.message||"",mobile:t.mobile||"",email:t.email||"",customFields:JSON.stringify(t.customFields||[])}),done:function(t){if(t){d._$error("_$sendOfflineMessage",t);this._$dispatchEvent("onleavesend",{error:t})}}._$bind(this)})};u._$sendSelectShunt=function(t){var e={type:1};n._$merge(e,t);b=0;this.__cbConnect2Yunxin(e)};u._$sendKefuHeart=function(t){var e=this,i=window.globalSetting.heartbeatCycle||8e3;var n=this.__getDataInCache("yunxin-user");var s=function(){if(t)e.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:n.exchange[0],scene:"p2p",content:JSON.stringify({cmd:-1e3,sessionid:t}),done:function(t,n){if(e.__timeout)clearTimeout(e.__timeout);e.__timeout=setTimeout(function(){s()},i)}})};s()};u.__getProductInfo=function(){if(window.localStorage){var t=this.__getDataInCache("yunxin-user");var e="X-"+t.appKey.toUpperCase()+"-YSF-PRODUCT",i=localStorage.getItem(e);return null==i?null:n._$query2object(i)}};u.__setAckDvc=function(t){if(window.localStorage){var e="YSF-"+t.toUpperCase()+"-DVCTIME";window.localStorage.setItem(e,+new Date)}};u.__setAckTime=function(t){if(window.localStorage){var e="YSF-"+t+"-MSGTIME";if(!document.hidden&&!x()&&1==this.__sdkWindowStatus)window.localStorage.setItem(e,+new Date)}};u.__confirmAckDvc=function(t){if(window.localStorage){var e="YSF-"+t.toUpperCase()+"-DVCTIME",i=this.__getDeviceID(),a=2100,o=+new Date;if(Math.abs(o-Number(window.localStorage.getItem(e)))>a){var r=s._$md52hex(n._$uniqueID()+"-"+ +new Date);window.localStorage.setItem(i,r)}}};u._$sendPrdMsg=function(){var t=this;if(window.localStorage){var e=this._$getPrdKey(),i=localStorage.getItem(e),s="YSF-PRODUCT-"+this.__sessionId+"-last",a=localStorage.getItem(s);if(!i)return;var o=this.__getProductInfo();if(o.pageId!=m.pageId)return;if("1"==o.sendByUser){var r={id:n._$uniqueID(),type:"pre-product",fromUser:1,from:{id:-72},content:o};t._$dispatchEvent("onmessage",r)}else{if(i==a)return;this._$doSendPrdMsg(o)}}};u._$doSendPrdMsg=function(t){var e=this.__getDataInCache("yunxin-user"),i=this,s=this._$getPrdKey(),a=localStorage.getItem(s);lastPrdKey="YSF-PRODUCT-"+this.__sessionId+"-last",lastPrd=localStorage.getItem(lastPrdKey);if(t)i.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:e.exchange[0],scene:"p2p",content:JSON.stringify(n._$merge({cmd:121},t)),done:function(e,s){if(!e){window.localStorage.setItem(lastPrdKey,a);var o=n._$merge({id:n._$uniqueID(),type:"productinfo",fromUser:1,from:{id:-72},time:s.time},t);if("1"==t.sendByUser)n._$merge(o,{read:0});i._$dispatchEvent("onmessage",o)}else{i._$dispatchEvent("onproducterror",{type:"product-error",content:"商品链接参数错误"});d._$error("sender3rdProductsInfo",n._$merge({cmd:121},e))}}})};u.__clearPrdStorage=function(){var t=this._$getPrdKey();window.localStorage.removeItem(t);var e=/^YSF-PRODUCT-\d+-last$/;for(var i in window.localStorage)if(e.test(i))window.localStorage.removeItem(i)};u._$sendPushMsg=function(t,e){t=t||[];var i=this.__getDataInCache("yunxin-user");for(var s=0;s<t.length;s++){var a=1==e?{cmd:133,deviceid:this.__getDeviceID(),msgId:t[s]}:{cmd:133,deviceid:this.__getDeviceID(),batchId:t[s]};this.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:i.exchange[0],scene:"p2p",content:JSON.stringify(a),done:function(t,e){if(t)d._$error("sendPushMsg",n._$merge({cmd:133},t))}})}};u._$sendPushMsgStatus=function(t,e){var i=this.__getDataInCache("yunxin-user");for(var s=0;s<e.length;s++)this.__nim.sendCustomSysMsg({cc:!0,filter:!0,to:i.exchange[0],scene:"p2p",content:JSON.stringify({cmd:135,msgSessionId:e[s],status:t}),done:function(t,e){if(t)d._$error("sendPushMsgStatus",n._$merge({cmd:135},t))}})};u._$checkCanSendFile=function(t){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:103,fromIp:e.ip,timestamp:t.timestamp}),done:function(t){if(!t);else d._$error("checkCanSendFile",n._$merge({cmd:103},t))}._$bind(this)})};u.__sendMessageByContent=function(t,e,i){t.time=t.time||+new Date;t.id=t.id||n._$uniqueID();t.idServer=t.idServer||n._$uniqueID();t.idClient=t.idClient||n._$uniqueID();this._$dispatchEvent("onmessage",{type:"text",time:t.time,id:t.idServer,content:e,fromUser:1,from:i||this._$getKefu(),to:{id:t.to},msgIdClient:t.idClient})};u._$getMoreBotList=function(t){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:204,target:t.template.action.target,params:t.template.action.params}),done:function(e){if(!e);else{this._$dispatchEvent("onmorebotlist",e,t);d._$error("getMoreBotList",n._$merge({cmd:204},e))}}._$bind(this)})};u._$getMoreBotDetail=function(t){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:204,target:t.target,params:t.params}),done:function(t){if(!t);else{this._$dispatchEvent("onmorebotdetail",t,{template:{id:"pair"}});d._$error("getMoreBotDetail",n._$merge({cmd:204},t))}}._$bind(this)})};u._$evalRobotAnswer=function(t){var e=this.__getDataInCache("yunxin-user");this._$dispatchEvent("onrobotanswerevalresult",{id:t.id,evaluation:t.evaluation,evalcontent:t.evalcontent||""});this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:64,msgidClient:t.msgIdClient,evaluation:t.evaluation,floating_layer_mark:this.__floatingLayerMark}),done:function(t){if(!t);else d._$error("evalRobotAnswer",n._$merge({cmd:64},t))}._$bind(this)})};u._$evaluationContent=function(t){var e=this.__getDataInCache("yunxin-user");this._$dispatchEvent("onrobotevalcontentresult",{id:t.id,evalcontent:t.evalcontent});if(""!=t.evalcontent)this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:66,msgidClient:t.msgIdClient,evaluation_content:t.evalcontent,floating_layer_mark:this.__floatingLayerMark}),done:function(e){if(!e)this._$dispatchEvent("onrobotevalcontentDone",t.id);else d._$error("evaluationContent",n._$merge({cmd:66},e))}._$bind(this)})};u._$getSeqOfHistoryLoad=function(){var t=this._$getAppkey().toUpperCase(),e="YSF-"+t+"-HISTORY-SEQ",i=localStorage.getItem(e);
try{i=JSON.parse(i)}catch(a){i=null}if(!i||m.fid&&i.relatedFid&&i.relatedFid!=m.fid){i={value:s._$md52hex(n._$uniqueID()+"-"+ +new Date),relatedFid:m.fid};localStorage.setItem(e,JSON.stringify(i))}else if(i&&!i.relatedFid&&m.fid){i.relatedFid=m.fid;localStorage.setItem(e,JSON.stringify(i))}return i.value};u._$sendInputContent=function(t){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:58,sessionid:t.sessionId,msgType:"text",content:t.content,editTime:+new Date,sendingRate:this._$getConfig("client_input").sendingRate}),done:function(t){if(!t);else d._$error("sendInputContent",n._$merge({cmd:58},t))}._$bind(this)})};u._$assoSendInputContent=function(t){var e=this.__getDataInCache("yunxin-user");this.__nim.sendCustomSysMsg({to:e.exchange[0],cc:!0,filter:!0,scene:"p2p",content:JSON.stringify({cmd:24,sessionid:t.sessionId,content:t.content,msgType:"text"}),done:function(t){if(!t);else d._$error("input_assciation_permisson",n._$merge({cmd:24},t))}._$bind(this)})};u._$getConfig=function(t){if(t)return v[t];else return v};u._$setConfig=function(t,e){if(t&&e)v[t]=e};var S=p._$allocate();d._$batch(S,["__init","__doCreateYXUser","__cbCreateYXUser","__cbConnect2Yunxin","__doCheckKefuFail","__doCheckQueue","__doClearQueueCheck","__doDisConnect","__updateKefuName","__sendMessageByContent","__botQuickEntry","__sender3rdProductsInfo","__confirmAckDvc","_$setSessionID","_$connect","_$pushMsgConnect","_$updateEvaluate","_$syncRobot","_$syncRobotEx","_$sendOfflineMessage","_$sendSelectShunt","_$sendPrdMsg","_$sendPushMsg","_$sendPushMsgStatus","_$sendThirdOrder","_$checkCanSendFile","_$getMoreBotList","_$getMoreBotDetail","_$evalRobotAnswer","_$sendInputContent"]);d._$batch(S,["__getDeviceID","__doResetTimeout","__getForeignInfo","__getProductInfo","__getNextTimeout","__getMessageBody","_$getKefu","_$getAppkey","_$getSessionID","_$getEvaluation","_$getVisitor","_$isDelay","_$isRobot","_$isInQueue","_$canSendMessage"],"after");return S},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","d8694785278ea23e9444192ffae00916","dbf5521d3d1c3fc354b111366f669416","948cfd3d7899a2b3fc0e88dc2e0d1a90","bad45afa5ce71bf8cd6e713026c82970","4d3be81e509943f25257cbc97abc448d","c016c209845c99608f6b8fbdad4ee39b","0a031608798084dd303ad76241dcc09c","f5da7bdddddad5f42b7c73b364e10a1f");I$("81e4c9c4999784e360c6a2b666dc5320",function(t,e,i,n,s,a,o,r,_,d){_._$$FileTransfer=t._$klass();d=_._$$FileTransfer._$extend(s._$$Abstract);d.__init=function(){this.__super()};d.__reset=function(t){this.__super(t);this.__fopt=i._$merge({node:null,accept:"*",multiple:!1,onchange:this.__onFileSelect._$bind(this)},t);if(this.__fopt.node){this.__fileSel=a._$bind(this.__fopt.node,this.__fopt);this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this))}};d.__destroy=function(){if(this.__fileSel)this.__fileSel._$recycle();this.__super()};d.__onFileSelect=function(t){this.__form=t.form;var i=e._$get(t.id),n=i.files;if(void 0===n){n=[];n.push(i)}this.__fModal=o._$$FileModal._$allocate({parent:document.body,canSend:this.__canSend,files:n,onok:this.__onOk._$bind(this),oncancel:this.__onCancel._$bind(this)});this.__canSend&&delete this.__canSend},d.__onOk=function(t,e){this._$dispatchEvent("onsend",e)};d.__onCancel=function(){this.__form.reset()};d.__checkCanSendFile=function(){this.__timestamp=i._$uniqueID();r._$checkCanSendFile({timestamp:this.__timestamp})};d.__onCanSendFile=function(t){this.__canSend=!!t.result;if(this.__fModal)this.__fModal._$dispatchEvent("oncansendfile",{result:this.__canSend})}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","be567474249a271e4786c144ccf5f75a","8fe733a225a830dc6b1da5866dcaf23c","9733787c25ceca396cb6e8dcce07ee63","0601a0c5ba07e512639f37a3e3c53ba0","cc7bc4a298ada69b7bf2d8371bd44932");I$("fc5aed51c0df9784c68a9c2b6896c8ea",'<textarea name="ntp" id="#<editBody>">\n <div class="m-iptbox">\n <label id="portrait_btn" class="portrait_label" title="发送表情"><i class="u-icon iconfont icon-portrait"></i></label>\n <label class="photo_label j-flag" title="发送图片"><i class="u-icon iconfont icon-photo"></i></label>\n <label class="file_label j-fflag" title="发送文件"><i class="u-icon iconfont icon-uploadfilesx1"></i></label>\n <div class="textarea j-richflag">\n <div class="textarea-mn j-flag"></div>\n </div>\n <button type="submit" class="u-btn u-btn-send j-flag">发送</button>\n <form class="form j-flag"></form>\n <div class="disabled"></div>\n </div>\n<&#47;textarea>\n<textarea name="jst" id="#<editStyle>">\n <head>\n <meta charset="utf-8"/>\n <style>\n html,body{cursor:text;font-size:14px;font-family:Arial;word-wrap:break-word;}\n html,body,p{margin:0;padding:0;border:0}\n html{width:100%;height:100%;overflow:hidden;}\n body{line-height:16px;padding:11px 10px;white-space:pre-wrap;}\n img{max-width:90%;}\n .portrait_icon{\n width: 24px;\n height: 24px;\n vertical-align: middle;\n display: inline-block;\n }\n ${css}\n </style>\n </head>\n <body contenteditable="true"></body>\n<&#47;textarea>\n<textarea name="txt" id="#<editToast>">\n <div class="tips-message">\n <i class ="u-icon u-icon-warning"></i>\n <h4></h4>\n </div>\n<&#47;textarea>\n<textarea name="txt" id="#<editPlaceHolder>">\n <div class="empty">请输入消息</div>\n<&#47;textarea>\n');I$("3d11bad61274f72cc4672369e4367f45",function(t,e,i){i.__insertLineBreak=function(t){t.execCommand("insertLineBreak")};i.__insertHTML=function(t,e){t.execCommand("insertHTML",!1,e)};i.__unlink=function(t){t.execCommand("unlink",!1)};i.__getTextContent=function(t){return t&&t.innerText||""};i.__focusToEnd=function(t){t.focus();var e=t.getSelection();if(e.rangeCount>0){var i=e.getRangeAt(0);i.selectNodeContents(t.document.body);i.collapse(!1)}};i.__fixFocus=function(t){};i.__collapse=function(t){try{t.getSelection().collapseToEnd()}catch(e){}};i.__hasSelectionHack=function(){return!1};i.__saveSelection=function(){};i.__revertSelection=function(t,e){};i.__getPosition=function(t){if(t){var e=t.getSelection(),i=e.getRangeAt(0);if(i){var n=(i.getClientRects()||[])[0];if(n){var s=t.document,a=Math.max(s.body.scrollTop,s.documentElement.scrollTop),o=Math.min(s.body.clientHeight,s.documentElement.clientHeight);if(n.top>0&&n.top<o)return;return{top:n.top+a,left:n.left}}}}}},"fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422");I$("2a3d8899990b1a57302aa0f0bb6e9ec4",function(t,e,i){if("trident"===t._$KERNEL.engine)I$("60118affcd9a7bf4e6e94d1eeb77ba2b",function(){i.__getPosition=function(t){};i.__saveSelection=function(t){var e=t.document;if(t.getSelection){var i=t.getSelection();if(i.rangeCount>0)return i.getRangeAt(0)}else if(e.selection)return e.selection.createRange()};i.__revertSelection=function(t,e){if(t&&e)if(e.select)e.select();else if(t.getSelection){var i=t.getSelection();i.addRange(e)}}});if("trident"===t._$KERNEL.engine&&t._$KERNEL.release>"6.0")I$("6d476928bfbe08d2eac3dcf42e33ce24",function(){i.__insertLineBreak=function(t){var e=t.getSelection().getRangeAt(0);var i=t.createElement("p");i.innerText=" ";e.insertNode(i);e.collapse(!0)};i.__insertHTML=function(t,i){var n=t.getSelection();if(n.getRangeAt){var s=n.getRangeAt(0);if(s){var a=t.createElement("div");a.innerHTML=i;s.deleteContents();e._$reverseEach(a.childNodes,function(t){s.insertNode(t)});s.collapse(!1)}}}});if("trident"===t._$KERNEL.engine&&tt._$KERNEL.release<="6.0")I$("d951de6b23d5aba225d22325eed7f522",function(){i.__insertLineBreak=function(t){var e=t.selection.createRange();e.pasteHTML("<p></p>");e.collapse(!1);e.select()};i.__insertHTML=function(t,e){var i=t.selection.createRange();if(i.pasteHTML)i.pasteHTML(e)};i.__hasSelectionHack=function(){return!0}});if("webkit"===t._$KERNEL.engine)I$("71eea72ff887613a8f02c41936272629",function(){i.__fixFocus=function(t){var e=t.getSelection();if(!(e&&e.rangeCount>0)){var i=t.document.createRange();i.selectNodeContents(t.document.body);e.addRange(i);i.collapse(!1)}}});if("gecko"===t._$KERNEL.engine)I$("49440cd1d2530c2c966f7161146cc696",function(){i.__insertLineBreak=function(t){t.execCommand("insertHTML",!1,"<p></p>")};i.__getTextContent=function(){var t=/inline|cell/i;var i=function(e){return!t.test(window.getComputedStyle(e,null).display||"")};var n=function(t,s){var a=t.childNodes;if(0!==a.length||t.nodeType!==Node.ELEMENT_NODE&&t.nodeType!==Node.TEXT_NODE){if(0===a.length)return;if(s.length>0)if("\n"!==s[s.length-1]&&i(t))s.push("\n");else s.push(" ");e._$forEach(a,function(t){n(t,s)})}else s.push(t.textContent||t.nodeValue||"")};return function(t){var e=[];n(t,e);return e.join("")}}()});return i},"e7be6ff9122e14c2be65196e9dffe066","fbbf6ddc0634989027d138f4ffd4b78b","3d11bad61274f72cc4672369e4367f45");I$("3c211b458888deac6eb931a8a8aa5f66",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h,p,m,g,b){var v="YSF_MSG_"+n._$uniqueID()+"_";g._$$YSFEditor=t._$klass();b=g._$$YSFEditor._$extend(s._$$Abstract);b.__init=function(){this.__sopt={};this.__ropt={};this.__fopt={accept:"image/*",onchange:this.__onFileSelect._$bind(this)};this.__popt={clazz:"pc_portrait",btn:"portrait_btn",onSelect:this.__onPortraitSelect._$bind(this),onSendGIf:this.__onSendGIf._$bind(this)};this.__eopt={visible:!0,onload:this.__onIFrameLoaded._$bind(this)};this.__aopt={onselectItem:this.__onSelectRbItem._$bind(this)};this.__switchInputAssociation=!1;this.__super()};b.__reset=function(t){this.__super(t);this.__inputComposition=!1;e._$dataset(this.__fopt.btn,"log",t.log||"");this.__limit=parseInt(t.maxLength)||0;this.__placeholder=t.placeholder||"输入消息...";this.__doShowPlaceHolder();var i=parseInt(t.maxHeight)||0;if(i)this.__range=[0,i];this.__sopt.css=t.css||"";this.__iframe=e._$createXFrame(this.__eopt);this.__doInitDomEvent([[this.__nsender,"click",this.__doSubmitContent._$bind(this,{label:0})],[this.__nholder,"click",this._$focus._$bind(this)],[this.__nfile,"click",this.__onFileBtnClick._$bind(this)]]);
this._$addEvent("oncansendfile",this.__onCanSendFile._$bind(this));if(t.popt){this.__popt=n._$merge(this.__popt,t.popt);this.__popt.parent=this.__popt.parent||this.__body;if(t.editFrom)this.__popt.newWebTrade=!0}this.__portrait=u._$$Portrait._$allocate(this.__popt);this.__ftOpt={node:this.__nfile,multiple:!0,onsend:this.__doSendFile._$bind(this)};this.__fileTransfer=l._$$FileTransfer._$allocate(this.__ftOpt);var s=window.setting.appkey;if(!this.__ccache){this.__ccache=f._$$Cache._$allocate({load_getCF:this.__getCFLists._$bind(this)});this.__ccache._$getCF({data:{appKey:s}})}};b.__getCFLists=function(t){this.__emojiLists=t;if(!this.__emojiLists.length){if(this.__popt.newWebTrade){e._$setStyle("portrait_btn","display","none");this._phLabel=e._$getByClassName(this.__body,"photo_label")[0];e._$setStyle(this._phLabel,"left","10px");this._fileLabel=e._$getByClassName(this.__body,"file_label")[0];e._$setStyle(this._fileLabel,"left","42px")}}else if(1==this.__emojiLists.length&&1!=this.__emojiLists[0].status&&this.__emojiLists[0].id==-1)if(this.__popt.newWebTrade){e._$setStyle("portrait_btn","display","none");this._phLabel=e._$getByClassName(this.__body,"photo_label")[0];e._$setStyle(this._phLabel,"left","10px");this._fileLabel=e._$getByClassName(this.__body,"file_label")[0];e._$setStyle(this._fileLabel,"left","42px")}};b.__destroy=function(){if(this.__scrollbar){this.__scrollbar._$recycle();delete this.__scrollbar}if(this.__observer){this.__observer.disconnect();delete this.__observer}if(this.__stimer){window.clearTimeout(this.__stimer);delete this.__stimer}e._$remove(this.__iframe);delete this.__iframe;delete this.__content;delete this.__range;this.__doHideToast();this._$clear();this.__super()};b.__initXGui=function(){var t=a._$parseUITemplate(p);return function(){this.__seed_tst=t.editToast;this.__seed_hld=t.editPlaceHolder;this.__seed_cnt=t.editStyle;this.__seed_html=t.editBody}}();b.__initNode=function(){this.__super();var t=e._$getByClassName(this.__body,"j-flag");this.__richText=e._$getByClassName(this.__body,"j-richflag")[0];this.__eopt.parent=t[1];this.__ropt.container=t[1];this.__fopt.btn=t[0];this.__fopt.form=t[3];this.__fopt.parent=this.__body;r._$bind(this.__fopt.btn,this.__fopt);this.__nsender=t[2];this.__ntoast=e._$html2node(a._$getTextTemplate(this.__seed_tst));this.__nholder=e._$html2node(a._$getTextTemplate(this.__seed_hld));this.__nfile=e._$getByClassName(this.__body,"j-fflag")[0];if(!this.__inputAssociation)this.__inputAssociation=new h(this.__aopt).$inject(t[2],"before")};b.__getViewPort=function(){try{return this.__iframe.contentWindow}catch(t){}};b.__getContext=function(){try{return this.__getViewPort().document}catch(t){}};b.__getBody=function(){try{var t=this.__getContext().body;return"true"==t.contentEditable?t:null}catch(e){}};b.__hasContent=function(){var t=this.__getBody(),e=this.__getTextContent(t).trim();if(!e)return u._$hasPortrait(t);else return!!e};b.__getTextContent=function(t){return m.__getTextContent(t||this.__getBody())};b.__doShowToast=function(t){this.__doHideToast();this.__body.appendChild(this.__ntoast);this.__ntoast.getElementsByTagName("h4")[0].innerHTML=t;this.__xtimer=window.setTimeout(this.__doHideToast._$bind(this),5e3)};b.__doHideToast=function(){if(this.__xtimer)this.__xtimer=window.clearTimeout(this.__xtimer);e._$removeByEC(this.__ntoast)};b.__doShowPlaceHolder=function(t){t=t||this.__placeholder;this.__nholder.innerText=t;this.__eopt.parent.appendChild(this.__nholder)};b.__doHidePlaceHolder=function(){e._$removeByEC(this.__nholder)};b.__doDumpImageFromEvent=function(t){var e=[],i=t.clipboardData||window.clipboardData||{};n._$forEach(i.items,function(t){if(0===t.type.indexOf("image")){var i=t.getAsFile();e.push({file:i,url:URL.createObjectURL(i)})}});var s=t.dataTransfer||{};n._$forEach(s.files,function(t){if(0===t.type.indexOf("image"))e.push({file:t,url:URL.createObjectURL(t)})});return e};b.__doDumpImageFromContent=function(t){var e=[],i=t.getElementsByTagName("IMG");n._$reverseEach(i,function(t){var i=t.src||"";if(0===i.indexOf("data:image")||i.indexOf("nos.netease.com")>0||i.indexOf("nosdn.127.net")>=0){e.push({url:i,file:i});t.parentNode.removeChild(t)}});return e};b.__doDumpTextFromEvent=function(t){var e="",i=t.clipboardData;if(i)e=i.getData("text/plain");else if(window.clipboardData)e=clipboardData.getData("text");return e||""};b.__doCheckEnter=function(t){if(13==t.keyCode){i._$stop(t);var n=this.__inputAssociation&&this.__inputAssociation.entryItem();if(!n||"-1"==n.key1)if(!t.ctrlKey)this.__doSubmitContent({label:1});else{m.__insertLineBreak(this.__getContext());var s=e._$getStyle(this.__getBody(),"lineHeight"),a=parseInt(s)||20;this.__getViewPort().scrollBy(0,a);this.__doCheckScrollBar()}else{this._$dispatchEvent("onsubmit",{type:"text",content:n.value});this.__inputAssociation.hide()}}};b.__doCheckScrollBar=function(){var t=function(){delete this.__stimer;if(this.__scrollbar)this.__scrollbar._$resize()};return function(){if(!this.__stimer)this.__stimer=window.setTimeout(t._$bind(this),50)}}();b.__doCheckAutoHeight=function(){var t=this.__range;if(t&&t[0]!==t[1]){var i=this.__eopt.parent;if(!t[0]){if(!i.clientHeight)return;var n=i.clientHeight,s=t[1];t[0]=n;t[1]=Math.max(s,n)}var a=this.__getBody();if(a){e._$setStyle(i,"height","1px");var o=Math.max(t[0],Math.min(a.scrollHeight,t[1]));e._$setStyle(i,"height",o+"px");this._$dispatchEvent("onheightchange")}}};b.__doCheckInputLimit=function(t){if(this.__limit){if(null==t)t=this._$getContent().trim();if(t.length>this.__limit)this._$setContent(t.substr(0,this.__limit))}};b.__doCheckSubmitable=function(){this.__doDisableSubmit(!this.__hasContent())};b.__doCheckPlaceHolder=function(){var t=this.__hasContent();!t?this.__doShowPlaceHolder():this.__doHidePlaceHolder()};b.__doCheckEventMessage=function(t){var e=this.__doDumpTextFromEvent(t);if(0===e.indexOf(v)){i._$stop(t);this._$dispatchEvent("onsubmit",{type:"message",content:e.replace(v,"")})}};b.__doCheckEventImage=function(t){var e=this.__doDumpImageFromEvent(t);if(!e||!e.length){this.__filterRichContent(t);window.setTimeout(this.__doCheckContentImage._$bind(this),100)}else{i._$stop(t);this.__doPreviewImage(e)}};b.__doCheckContentImage=function(){var t=this.__getBody(),e=this.__doDumpImageFromContent(t);t.scrollTop=2*t.scrollHeight;m.__focusToEnd(this.__getViewPort());if(e&&e.length)this.__doPreviewImage(e)};b.__doSelectionChange=function(t){var e=this.__onSelectionChange._$bind(this);if(!window.MutationObserver){this.__doInitDomEvent([[t,"selectionchange",e]]);if(m.__hasSelectionHack())this.__doInitDomEvent([[t,"keydown",e],[t,"keyup",e]])}else{this.__observer=new MutationObserver(e);this.__observer.observe(t,{subtree:!0,childList:!0,attributes:!0,characterData:!0})}};b.__doLoadImage=function(t,e,i){var n=this,s=new Image;s.onload=function(){e.call(n,t)};s.onerror=function(){t.file=null;(i||e).call(n,t)};s.src=t.url};b.__doPreviewImage=function(){var t=function(t){var e=[];n._$forEach(t,function(t){if(t.file)e.push(t)});return e};return function(e){var i=0,s=this;if(!this.__onPreviewState){var a=function(){i++;if(i==e.length){var n=t(e);if(!n.length)this.__doSendImage({});else{s.__onPreviewState=!0;c._$preview({photos:n,onok:function(){s.__doSendImage(n);delete s.__onPreviewState},oncc:function(){delete s.__onPreviewState}})}}};n._$forEach(e,function(t){if(t.url)this.__doLoadImage(t,a,a);else i++},this)}}}();b.__doSendFile=function(t){n._$forEach(t,function(t){if(!(t.type.indexOf("video")>-1))this._$dispatchEvent("onsubmit",{type:"file",content:{file:t,name:t.name,size:t.size}});else{var e={file:t};e.url=URL.createObjectURL(e.file);this.__doSendVideo(e)}},this)};b.__doSendImage=function(t){if(!n._$isArray(t))this._$dispatchEvent("onsubmit",{type:"image",content:{url:t.url,file:t.file}});else n._$forEach(t,this.__doSendImage,this)};b.__doSendVideo=function(t){if(!n._$isArray(t))this._$dispatchEvent("onsubmit",{type:"video",content:{url:t.url,file:t.file}});else n._$forEach(t,this.__doSendVideo,this)};b.__doSubmitContent=function(t){var e=this._$getContent().trim();if(e)if(!(this.__limit&&e.length>this.__limit))this._$dispatchEvent("onsubmit",n._$merge({type:"text",content:e},t));else this._$toast("消息内容超过最大限制"+this.__limit+"个字符")};b.__doDisableSubmit=function(t){this.__nsender.disabled=!!t;!t?e._$delClassName(this.__nsender,"u-btn-disabled"):e._$addClassName(this.__nsender,"u-btn-disabled")};b.__doFocusToEnd=function(){m.__collapse(this.__getViewPort())};b.__doFocus=function(){this.__doHidePlaceHolder()};b.__doBlur=function(){this.__doCheckPlaceHolder()};b.__onIFrameLoaded=function(t){var e=this.__getContext();e.open();e.write(o._$get(this.__seed_cnt,this.__sopt));e.close();var n=this.__getViewPort();this.__doInitDomEvent([[e,"paste",this.__onContentPaste._$bind(this)],[e,"drop",this.__onFileDropIn._$bind(this)],[e,"keydown",this.__doCheckEnter._$bind(this)],[n,"focus",this.__doFocus._$bind(this)],[n,"blur",this.__doBlur._$bind(this)],[n,"scroll",this.__doCheckScrollBar._$bind(this)],[e,"click",i._$dispatchEvent._$bind(i,document,"click")],[e,"beforedeactivate",this.__doSaveSelection._$bind(this)],[e,"compositionstart",this.__onCompositionStart._$bind(this)],[e,"compositionend",this.__onCompositionEnd._$bind(this)],[e,"keyup",this.__onKeyup._$bind(this)]]);this.__doSelectionChange(e);try{e.execCommand("enableObjectResizing",!1,!1)}catch(s){}this.__ropt.parent=e.body;this.__ropt.sbody=this.__getViewPort();this.__scrollbar=d._$$Scrollbar._$allocate(this.__ropt);this._$setContent(this.__content||"");this.__setIframeStyle(e)};b.__doSaveSelection=function(){this.__range=m.__saveSelection(this.__getViewPort())};b.__onSelectionChange=function(t){var e=this._$getContent();this.__doCheckSubmitable();this.__doCheckAutoHeight();!this.__inputComposition&&this._$dispatchEvent("oninputchange",e);this.__inputAssociation.$emit("change",{inputcontent:e})};b.__onContentPaste=function(t){this.__doCheckEventMessage(t);if(!this.__disSendImg)this.__doCheckEventImage(t);else{this.__stopImgEvent(t);
this.__filterRichContent(t)}};b.__onFileSelect=function(t){var i=e._$get(t.id),n={file:(i.files||[])[0]};if(!n.file)n.file=i;else if(n.file.type.indexOf("image")<0)n.file=null;else n.url=URL.createObjectURL(n.file);this.__doLoadImage(n,this.__doSendImage)};b.__onFileDropIn=function(t){if(!this.__disSendImg){this.__doCheckEventImage(t);i._$stop(t);window.setTimeout(this.__doFocusToEnd._$bind(this),150)}else this.__stopImgEvent(t)};b.__onSendGIf=function(t){var e={};var i='<img src="'+t.src+'" title="'+t.name+'" width="'+t.Imgwidth+'" height="'+t.ImgHeight+'">';e=n._$merge(e,{type:"rich",content:i});this._$dispatchEvent("onsubmit",e)};b.__onPortraitSelect=function(t){var e=this.__getContext();try{this._$focus();m.__fixFocus(this.__getViewPort());this.__doScrollToCursor();m.__insertHTML(e,t.html)}catch(i){console.log(i)}this.__onSelectionChange()};b.__doScrollToCursor=function(){var t=this.__getViewPort(),e=m.__getPosition(t);if(e)if(t)t.scrollTo(0,e.top||0)};b._$setContent=function(t,e){var i=this.__getBody();var n=document.createElement("div");if(i){delete this.__content;if("innerText"in n)n.innerText=t||"";else n.textContent=t||"";i.innerHTML=this.__text2portrait(n.innerHTML);if(!e)this.__onSelectionChange();else this._$dispatchEvent("oninputchange",t,e)}else this.__content=t||""};b._$getContent=function(){var t=this.__getBody(),e=u._$formatPortrait(t)||t;return this.__getTextContent(e)};b._$reset=function(){this._$resetFile();this._$resetContent()};b._$resetFile=function(){this.__fopt.form.reset()};b._$resetContent=function(){this._$setContent("")};b._$focus=function(){var t=this.__getViewPort();if(t){this.__doHidePlaceHolder();t.focus();m.__revertSelection(t,this.__range);delete this.__range}};b._$blur=function(){this.__focus=!1;window.focus()};b._$disable=function(t){!t?e._$delClassName(this.__body,"z-disabled"):e._$addClassName(this.__body,"z-disabled");this.__portrait._$hide()};b._$toast=function(t){if(!t)this.__doHideToast();else this.__doShowToast(t)};b._$placeholder=function(t){this._$reset();this.__doShowPlaceHolder(t)};b._$clear=function(t){t=t||{};if(!t.disabled&&t.focus){this._$reset();this._$focus()}else{this._$blur();this._$placeholder(t.placeholder);this._$disable(!!t.disabled);if(t.toast)this.__doShowToast(t.toast)}};g._$copy=function(t){i._$addEvent(t,"copy",function(t){var n=i._$getElement(t,"d:copyId");if(n){i._$stop(t);var s=v+e._$dataset(n,"copyId");if(t.clipboardData)t.clipboardData.setData("text/plain",s);else if(window.clipboardData)clipboardData.setData("text",s)}})};b.__portrait2text=function(t){return u._$portrait2text(t)};b.__text2portrait=function(t){return u._$text2portrait(t)};b._$toggleOpr=function(t){if(t){e._$addClassName(this.__richText,"u-status-robot");e._$addClassName(this.__fopt.btn,"f-dn");e._$addClassName("portrait_btn","f-dn");e._$addClassName(this.__nfile,"f-dn");this.__portrait._$hide()}else{e._$delClassName(this.__richText,"u-status-robot");e._$delClassName(this.__fopt.btn,"f-dn");e._$delClassName("portrait_btn","f-dn");e._$delClassName(this.__nfile,"f-dn")}this._$setDisSendImg(t)};b.__filterRichContent=function(t){i._$stop(t);var e=this.__getContext();var s=this.__doDumpTextFromEvent(t);s=this.__text2portrait(s);m.__insertHTML(e,n._$escape(s))};b._$setDisSendImg=function(t){t?this.__disSendImg=!0:delete this.__disSendImg};b.__stopImgEvent=function(t){var e=this.__doDumpImageFromEvent(t);if(!e||!e.length);else i._$stop(t)};b.__onFileBtnClick=function(t){this.__timestamp=n._$uniqueID();this._$dispatchEvent("checkcansendfile",this.__timestamp)};b.__onCanSendFile=function(t){if(t.timestamp==this.__timestamp){this.__canSend=!!t.result;this.__fileTransfer._$dispatchEvent("oncansendfile",{result:this.__canSend})}};b.__setIframeStyle=function(t){var e=function(t,e,i,n){if(t&&i){i="#"+i;if(!e)var s=t+"{"+i+"}";else s=t+"{"+e+":"+i+"}";var a=document.createTextNode(s);n.appendChild(a)}};var i=n._$query2object(location.search.substr(1)),s=i["editorColor"],a=i["editorBgColor"];if(s||a){var o=t.createElement("style"),r=t.head;o.type="text/css";r.appendChild(o);e("body","color",s,o);e("body","background-color",a,o)}};b.__onCompositionStart=function(t){this.__inputComposition=!0};b.__onCompositionEnd=function(t){this.__inputComposition=!1;var e=this._$getContent();!this.__inputComposition&&this._$dispatchEvent("oninputchange",e);this.__inputAssociation.$emit("change",{inputcontent:e})};b.__onKeyup=function(t){if(38===t.keyCode||40===t.keyCode){var e={keyCode:t.keyCode};if(this.__inputAssociation&&this.__inputAssociation.entryItem().qalist.length>0)this.__inputAssociation.$emit("keyboard",e)}};b.__onSelectRbItem=function(){var t=this.__inputAssociation.entryItem();this._$dispatchEvent("onsubmit",{type:"text",content:t.value});this.__inputAssociation.hide()};b._$renderInputAssociation=function(t){var e={qalist:t,inputcontent:this._$getContent().trim()};this.__inputAssociation.$emit("change",e);this.__inputAssociation.show()};b._$hideInputAssociation=function(){this.__inputAssociation.hide()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","9733787c25ceca396cb6e8dcce07ee63","b8c452dcf5e5dd56a4db87471ce5da65","c711308f00adca75206c9dc3966a29d2","c1d55708b36e5cee72cf23349b7f94da","81e4c9c4999784e360c6a2b666dc5320","ccb6b7d0ce45c3548151b739858e96c8","00b1248fcdd93958d87e26de99277f67","f2b46c0ee658f65c8607f9d898c02a66","fc5aed51c0df9784c68a9c2b6896c8ea","2a3d8899990b1a57302aa0f0bb6e9ec4");I$("9b42795f59bfa55be8f84d79b287510a",function(t,e,i,n,s,a,o){a._$$HeadTab=t._$klass();o=a._$$HeadTab._$extend(s._$$Abstract);o.__reset=function(t){this.__super(t);this.tab={node:t.node,list:t.list,total:t.list.length,offset:0,parentWidth:t.parentWidth,selected:t.selected||"z-crt"};this.startNodeIndexMap=[0];this.currentNodeIndex=0;if(t.node){n._$merge(this.tab,{icon:this.__initIconNode(t.node)});this.__initEvent();this.__resetTab();e._$style(this.tab.node,{left:"0px",position:"absolute"})}};o.__initIconNode=function(t){var i=t.parentNode.parentNode;if(i){var s=function(t){var e=document.createElement("a");e.className=t;return e};var a=function(t){var i=e._$getChildren(t,"j-flag-triangle");n._$forEach(i,function(t){e._$remove(t)})};a(i);var o=s("icon-triangle-left j-flag-triangle");var r=s("icon-triangle-right j-flag-triangle");i.appendChild(o);i.appendChild(r);return[o,r]}};o.__initEvent=function(){i._$addEvent(this.tab.icon[0],"click",this.__clickLeftIcon._$bind(this));i._$addEvent(this.tab.icon[1],"click",this.__clickRightIcon._$bind(this));this._$addEvent("onresize",this.__onWidthResize._$bind(this))};o.__resetTab=function(){var t=this.tab.node.parentNode.offsetWidth,i=this.tab.node.scrollWidth,n=Math.ceil(i/t);this.startNodeIndexMap=[0];var s=0;for(var a=0,o=this.tab.list.length;a<o;a++){var r=this.tab.list[a],_=parseFloat(e._$getStyle(r,"margin-left")),d=parseFloat(e._$getStyle(r,"margin-right")),c=r.getBoundingClientRect().width+_+d,l=this.tab.node.parentNode.getBoundingClientRect().width;s+=c;if(s-d>l){s=c;this.startNodeIndexMap.push(a)}}this.__setIcon()};o.__onPageChange=function(){this.__setIcon();this.__positionScreen()};o.__setIcon=function(){e._$setStyle(this.tab.icon[0],"display","none");e._$setStyle(this.tab.icon[1],"display","none");if(void 0!=this.__getPreStartNodeIndex())e._$setStyle(this.tab.icon[0],"display","block");if(this.__getNextStartNodeIndex())e._$setStyle(this.tab.icon[1],"display","block")};o.__positionScreen=function(){var t=3;var i=this.tab.list[this.currentNodeIndex];var n=e._$offset(i,i.parentNode).x||0;e._$setStyle(this.tab.node,"left",-n+t+"px")};o.__clickLeftIcon=function(t){var e=this.__getPreStartNodeIndex();if(void 0!=e){this.currentNodeIndex=e;this.__onPageChange()}};o.__clickRightIcon=function(t){var e=this.__getNextStartNodeIndex();this.currentNodeIndex=e;this.__onPageChange()};o.__getPreStartNodeIndex=function(){for(var t=this.startNodeIndexMap.length-1;t>=0;t--){var e=this.startNodeIndexMap[t];if(e<this.currentNodeIndex)return e}};o.__getNextStartNodeIndex=function(){for(var t=0;t<this.startNodeIndexMap.length;t++){var e=this.startNodeIndexMap[t];if(e>this.currentNodeIndex)return e}return!1};o.__onWidthResize=function(){this.__resetTab()};o._$recycle=function(){i._$delEvent(this.tab.icon[0],"click");i._$delEvent(this.tab.icon[1],"click");this.__super()}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","5fb495f256a5dcde2a92e5fe919a6422","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c");I$("b02d8d903f51634e97264ccb64933373",'<textarea name="ntp" id="#<lbEntry>">\n<&#47;textarea>\n\n<textarea name="jst" id="#<lbList>">\n\t<ul class="m-botentry j-flag">\n\t\t{list list as x}\n\t\t\t<li class="li" data-action="${x.action}" data-id="${x.id || x.data}" data-url="${x.data}" data-label="${x.label}">\n\t\t\t\t${x.label}\n\t\t\t</li>\n\t\t{/list}\n\t</ul>\n<&#47;textarea>\n');I$("21e5b22e71937c4475a2de368ed9e491",function(t,e,i,n,s,a,o,r,_,d,c){d._$$BotEntry=t._$klass();c=d._$$BotEntry._$extend(s._$$Abstract);c.__reset=function(t){this.__super(t);var i=t.list;var n=this;this.__timer={};this.__timer["resize"]=null;this.__canClick=!0;if(i&&i.length>0)this.__renderList(t.list);e._$addEvent(window,"resize",function(t){if(n.__timer.resize)clearTimeout(n.__timer.resize);n.__timer.resize=setTimeout(function(){n.__ht._$dispatchEvent("onresize")},500)})};c.__destroy=function(){this.__super()};c.__initXGui=function(){var t=a._$parseUITemplate(_);return function(){this.__seed_html=t.lbEntry;this.__seed_list=t.lbList}}();c.__initNode=function(){this.__super();this.__delegate(this.__body,"li",this.__selectItem._$bind(this));i._$style(this.__body,{right:"20px",left:"20px",height:"100%",position:"absolute",overflow:"hidden"})};c.__renderList=function(t,e){o._$render(this.__body,this.__seed_list,{list:t,showEval:e});var n=document.getElementsByClassName("chat_show_bot")[0];
var s=i._$getByClassName(this.__body,"m-botentry")[0];var a=1e3;if(n)a=n.offsetWidth;var _=i._$getByClassName(this.__body,"li");TweenMax.staggerFrom(_,1,{x:a,onStart:function(){if(n&&s&&n.offsetWidth-40>s.offsetWidth)i._$style(s,{width:"100%"})}},.2,function(){i._$style(s,{width:"auto"})});var d=i._$getByClassName(this.__body,"j-flag")[0];var t=i._$getChildren(d);this.__ht=r._$$HeadTab._$allocate({node:d,list:t})};c.__delegate=function(t,i,n){var s=this;e._$addEvent(t,"click",function(t){var s=e._$getElement(t,"t:"+i);if(s){s.innerText&&DATracker&&DATracker.track("bot_entry",{name:s.innerText});n(s)}})};c.__selectItem=function(t){var e=this;if(e.__canClick){var n=i._$dataset(t,"label"),s=i._$dataset(t,"action"),a=i._$dataset(t,"url");id=i._$dataset(t,"id");this._$dispatchEvent("select",{label:n,action:s,url:a,id:id});e.__canClick=!1;setTimeout(function(){e.__canClick=!0},1e3)}}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","9b42795f59bfa55be8f84d79b287510a","b02d8d903f51634e97264ccb64933373");I$("462784759f136bedba5a0d03f454e788","<bot-drawer template={template} on-selectItem={this.onSelectItem($event)}></bot-drawer>");I$("2ae4b3f868c159318a2eff6d37fe4259",function(t,e,i,n,s){return i.extend({name:"bot-drawerModal",config:function(t){e._$extend(t,{contentTemplate:s,"class":"m-modal-botDrawer",closeButton:!0,okButton:!1,cancelButton:!1,hideFooter:!0,title:t.template.title||" "});this.supr(t)},init:function(){this.supr()},destroy:function(){this.supr()},onSelectItem:function(t){this.$emit("selectItem",t)}})},"be567474249a271e4786c144ccf5f75a","3e346f2b6313e57a75f5ee9b603c4b65","fdec2b215e7e7770f7e7b5af3422ee86","7ccdd01e9d3ce809aac4bc84d0216707","462784759f136bedba5a0d03f454e788");I$("8c7d64f10ed8f664dc200c4c4ad16191",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u,h,p,m,g,b,v,$,y,x,w,S){S=t._$klass();w=S._$extend(y._$$Module);w.__doBuild=function(){this.__super();this.__scrollToNodeOffset=75};w.__onShow=function(t){this.__super(t)};w.__onRefresh=function(t){this.__super(t)};w.__onHide=function(){this.__super()};w.__initEditorConfig=function(t){this.__super();this.__eopt={popt:{parent:"ysf-client",col:12},maxLength:4500,parent:t,editFrom:"trade",placeholder:window.setting.inputPlaceholder,onsubmit:this.__editorSubmit._$bind(this),oninputchange:this.__onInputChange._$bind(this),checkcansendfile:this.__checkCanSendFile._$bind(this)}};w.__initEditor=function(){if(!this.__editor){this.__editor=f._$$YSFEditor._$allocate(this.__eopt);this.__editor._$toggleOpr(!0)}};w.__initEventListener=function(){this.__super();if(1!=window.setting.winType&&!window.setting.tradeTag)this.__doInitDomEvent([[window,"beforeunload",this.__onBeforeUnload._$bind(this)]]);$._$delegateWithStopEvent(this,this.__body,{picHref:this.__picHref._$bind(this)})};w.__setEditorContent=function(t){if(this.__editor){var e=t.shop.editorContent;if(e){this.__editor._$setContent(e);this.__editor._$resetFile();this.__editor.__portrait._$hide();this.__editor._$focus()}else this.__editor._$clear({focus:!1})}};w.__richContentDelegate=function(t,i){i=i||window.event;var s=e._$getElement(i,"d:group");if(s){var a=n._$dataset(s,"url");window.open(a,"_blank")}var o=e._$getElement(i,"t:a");if(o)this.__onRichContentLinkClick(o,i)};w.__picHref=function(t){var e=n._$dataset(t,"href");window.open($._$getOriginImageUrl(e),"_blank")};w.__renderBotEntry=function(t){if(this.__botentry)this.__botentry._$recycle();var e=n._$getByClassName(this.__body,"j-flag-bot")[0],i=n._$getByClassName(this.__body,"j-chat")[0];var s=n._$getStyle(e,"bottom");if(!t.kefu.isRobot&&t.entranceSetting&&t.entranceSetting.length>=1){var a=$._$copy(t.entranceSetting);for(var o=a.length-1;o>=0;o--)if(!("evaluate"!=a[o].action||t.sessionStatus&&t.sessionStatus.initShowEvaluation))a.splice(o,1)}if(t.kefu.isRobot&&(!t.bot||t.bot.length<1)||!t.kefu.isRobot&&(!a||a.length<1)){n._$style(i,{bottom:n._$getStyle(e,"bottom")});n._$style(e,{opacity:0,"z-index":-1e3})}else{n._$style(e,{opacity:1,"z-index":0});n._$style(i,{bottom:parseInt(s.replace(/px/gi,""))+e.offsetHeight+"px"});var r=t.kefu.isRobot?$._$copy(t.bot):a;this.__botentry=b._$$BotEntry._$allocate({parent:e,list:r,select:this.__onBotEntrySelect._$bind(this)})}};w.__initBotDrawerModal=function(t,e){this.__botDrawerModal=new v({data:{template:t.content.template}}).$inject(document.body).$on("selectItem",function(i){this.__onSelectBotBubbleItem(i,t,e,this.__botDrawerModal)}._$bind(this))};y._$regist("chat",S)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","fbbf6ddc0634989027d138f4ffd4b78b","5fb495f256a5dcde2a92e5fe919a6422","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","d99f29446b4a4cf86c6084cb99df7ab0","aa835e6c54cfdee711ae8d0d1296fa57","e4a45dc3cf399bf73004ce111fd4b206","f0b1d7ff05e74da750d6bb82da881934","d67add781b37b82c1816b8c159701e56","4e09e3c278408cd8001c7779e34c93e9","3c211b458888deac6eb931a8a8aa5f66","00b1248fcdd93958d87e26de99277f67","93872d9c4b2f20c68917dbdfa2b58e43","9e07459e62a4073031ead15e8b2bc7b2","57b425e54e094947e45b4232d3c28d89","aac22a477c227075a6def1f716ee003f","21e5b22e71937c4475a2de368ed9e491","2ae4b3f868c159318a2eff6d37fe4259","35df4ef4567b6cd0275a1b849d2bea8c","36d99ebff621b8efb3f90d915049bdd7");</textarea>
</div>
<div style="display:none" id="umi://trade/session/pc/index.html">
<textarea id="session-body" name="txt">
<div class="j-sess">
<div class="slide_hd m-info">
<div class="info_tlt">
会话列表
</div>
</div>
<div class="slide_bd" >
<ul class="j-flag m-session"></ul>
</div>
</div>
</textarea>
<textarea name="js">I$("8ec78e937121e9c3e934ecdc253c77a1",function(t,e,i,n,s,a,o,r,_,d,c,l,f,u){u=t._$klass();f=u._$extend(c._$$Module);f.__doBuild=function(){this.__super()};f.__onShow=function(t){this.__super(t)};f.__onRefresh=function(t){this.__super(t)};f.__onHide=function(){this.__super()};c._$regist("sess",u)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","d252039c36767cb4f534ca3f91188796","d99f29446b4a4cf86c6084cb99df7ab0","aa835e6c54cfdee711ae8d0d1296fa57","e4a45dc3cf399bf73004ce111fd4b206","d67add781b37b82c1816b8c159701e56","35df4ef4567b6cd0275a1b849d2bea8c","88b788956da2767fcaa8ddc366db6d27");</textarea>
</div>
<div style="display:none" id="umi://trade/tab/index.html">
<textarea id="tab-body" name="txt">
<div class="tab_info j-flag"></div>
</textarea>
<textarea name="js">I$("8eece85b663528daaf7194a294d735ff",'<textarea name="ntp" id="#<faqBody>">\n <div class="bd_right j-companyinfo-right j-flag">\n </div>\n<&#47;textarea>\n<textarea name="jst" id="#<faqInfo>">\n {if (companyInfo.announcementTitle) !=\'\' || (companyInfo.announcementContent) !=\'\' || ((companyInfo.pictureHref) ) || ((companyInfo.pictureUrl))}\n <div class="m-announce j-announceinfo {if (companyInfo.questions.length == 0)}m-announce-ex{/if}">\n {if (companyInfo.announcementTitle) !=\'\'}\n <h1 class="announce_tlt">\n ${companyInfo.announcementTitle}\n </h1>\n {/if}\n {if (companyInfo.announcementContent) !=\'\'}\n <div class="announce_cnt" data-action="richContentDelegate">${companyInfo.announcementContent}</div>\n {/if}\n {if (companyInfo.pictureHref) !=\'\' || (companyInfo.pictureUrl) !=\'\'}\n <div class="announce_pic">\n {if (companyInfo.pictureUrl)}\n {if (companyInfo.pictureHref)}\n <a data-action="pictureHref" data-href="${companyInfo.pictureHref}" class="u-conpanyLogo"><img src="${companyInfo.pictureUrl}" alt="${companyInfo.pictureNmae}"> </a>\n {else}\n <a class="u-conpanyLogo"><img src="${companyInfo.pictureUrl}" alt="${companyInfo.pictureNmae}"> </a>\n {/if}\n {else}\n <!-- <img src="${companyInfo.pictureUrl}" alt="${companyInfo.pictureNmae}"> -->\n {/if}\n </div>\n {/if}\n </div>\n {else}\n <div class="m-announce j-announceinfo" style="padding: 0px; border: 0px;">\n </div>\n {/if}\n {if (companyInfo.questions.length > 0) }\n <div class="m-comquestions j-comquestions">\n <h1>常见问题</h1>\n <div>\n <ul class="j-comquestions bd">\n {list companyInfo.questions as x}\n <li class="itm" data-id="${x.id}">\n <h2 class="title j-question" data-action="questionlist">${x.title}<i class="j-icon u-icon-infodown"></i></h2>\n <p class="answer f-dn" data-action="richContentDelegate">${x.answer}</p>\n </li>\n {/list}\n </ul>\n </div>\n </div>\n {/if}\n<&#47;textarea>\n');I$("8ae6eae18399c1d213cfd2e7fd33c429",function(t,e,i,n,s,a,o,r,_,d,c){d._$$FAQ=t._$klass();c=d._$$FAQ._$extend(s._$$Abstract);c.__init=function(){this.__super()};c.__reset=function(t){this.__super(t);o._$render(this.__container,this.__seed_info,{companyInfo:this.__parseAInfo(window.companyInfo)});this.__initEvent();this.__buildFAQHeight()};c.__destroy=function(){this.__super()};c.__initXGui=function(){var t=a._$parseUITemplate(_);return function(){this.__seed_html=t.faqBody;this.__seed_info=t.faqInfo}}();c.__initNode=function(){this.__super();this.__container=this.__body};c.__toogleQuestion=function(t){var e=t.parentNode.parentNode,n=t.parentNode.getElementsByTagName("p")[0],s=t.parentNode.getElementsByTagName("i")[0],a=i._$hasClassName(s,"u-icon-infodown");this.__disableQuestionList(e);if(a){i._$delClassName(n,"f-dn");i._$replaceClassName(s,"u-icon-infodown","u-icon-infoup")}else{i._$replaceClassName(s,"u-icon-infoup","u-icon-infodown");i._$addClassName(n,"f-dn")}};c.__disableQuestionList=function(t){var e=t.getElementsByTagName("p"),n=t.getElementsByTagName("i");for(var s=0;s<e.length;s++)i._$addClassName(e[s],"f-dn");for(var s=0;s<n.length;s++)i._$replaceClassName(n[s],"u-icon-infoup","u-icon-infodown")};c.__initEvent=function(){this.__questionList=i._$getByClassName(this.__body,"j-question");if(this.__questionList)this.__questionList.forEach(function(t){e._$addEvent(t,"click",this.__toogleQuestion._$bind(this,t))}._$bind(this))};c.__calculateCampanyInfo=function(){_tab=i._$getByClassName(document.body,"j-tab")[0];_announceinfo=i._$getByClassName(document.body,"j-announceinfo")[0];_comquestions=i._$getByClassName(document.body,"j-comquestions ")[1];var t=_tab.clientHeight-_announceinfo.clientHeight-55;i._$setStyle(_comquestions,"height",t+"px")};c.__parseAInfo=function(t){var e=t;var i=t.announcementContent||"";var s=e.questions||"";if(!n._$isString(s)){e.announcementContent=i.replace(/<a/g,'<a data-action="openlink"');if(s)n._$forEach(s,function(t){t.answer=t.answer.replace(/<a/g,'<a data-action="openlink"')},this);return e}};c.__buildFAQHeight=function(){var t=this.__body.offsetHeight;var e=i._$getByClassName(this.__body,"j-announceinfo")[0],n=e.offsetHeight,s=i._$getByClassName(this.__body,"j-comquestions")[0];var a=t-n;i._$setStyle(s,"height",a+"px")}},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","fbbf6ddc0634989027d138f4ffd4b78b","8fe733a225a830dc6b1da5866dcaf23c","d252039c36767cb4f534ca3f91188796","2a0f6f00e8af2a07d5b9a7c4620f5b4e","c711308f00adca75206c9dc3966a29d2","8eece85b663528daaf7194a294d735ff");I$("2acb24b6a7b70b5d190a68cd3caab413",function(t,e,i,n,s,a,o,r,_){_=t._$klass();r=_._$extend(s._$$Module);r.__doBuild=function(){this.__tid="tab-body";this.__super();this.__box=i._$getByClassName(this.__body,"j-flag")[0]};r.__onShow=function(t){this.__super(t);this.__initFAQ()};r.__onRefresh=function(t){this.__super(t)};r.__onHide=function(){this.__super()};r.__initFAQ=function(){if(window.permissionSetting["SHOW_COMPANY_INFO"]&&window.companyInfo.visitorSwitch)this.__faq=a._$$FAQ._$allocate({parent:this.__body})};s._$regist("tab",_)},"e4f0b0b7857ed3c1e2d0a46ba5b670d6","be567474249a271e4786c144ccf5f75a","5fb495f256a5dcde2a92e5fe919a6422","d252039c36767cb4f534ca3f91188796","8432624716159a6412219f26247c91bd","8ae6eae18399c1d213cfd2e7fd33c429");</textarea>
</div><script src="https://qiyukf.nosdn.127.net/sdk/tr/core_81972fa40e752c459ca54075ba2ae193.js"></script>
<script>
I$("a1288fc0ddb218ab53d949f1850ccf9f",function(t,e,i,n,s,a,o){window.setting=window.setting||{};window.logSetting=window.logSetting||{};var r=t._$query2object(location.search.substr(1));t._$merge(window.setting,{appkey:r.k,bid:r.bid||-1,fid:r.u,device:r.u||r.d,uuid:r.uuid||"",groupid:r.gid||"",staffid:r.sid||"",email:r.e||null,mobile:r.m||null,name:r.n||null,qtype:r.qtype||0,welcomeTemplateId:r.welcomeTemplateId||0,robotShuntSwitch:r.robotShuntSwitch||0,robotId:r.robotId||0,templateId:r.templateId||0,unconfirm:r.unconfirm||0,pageId:r.pageId||0});if(window.localStorage){if(!setting.device)setting.device=localStorage.getItem("YSF-"+setting.appkey.toUpperCase()+"-UID")||e._$md52hex(t._$uniqueID()+"-"+ +new Date);window.localStorage.setItem("YSF-"+setting.appkey.toUpperCase()+"-UID",setting.device)}if(window.setting.bid==-1)n._$startup(a);else n._$startup(s)},"fbbf6ddc0634989027d138f4ffd4b78b","d8694785278ea23e9444192ffae00916","d252039c36767cb4f534ca3f91188796","94f850ca66788dd0753c1e7b6f5879b3","9604de6a06fe5cd5d221f2eeb54e2987","1bed2dd81a9cf0d5f2e16a970a02d24b");
</script>
<div class="resource-preload" style="visibility: hidden; position: fixed;">
<audio src="/sdk/res/audio/message.mp3" autoplay muted id="notify-sound-url"></audio>
<i class= "u-icon-loading" style="display: inline;"></i>
<i class= "u-icon-failure" style="display: inline;"></i>
</div>
<script type="text/javascript">
(function(document,datracker,root){function loadJsSDK(){var script,first_script;script=document.createElement("script");script.type="text/javascript";script.async=true;script.src="https://hubble-js-bucket.nosdn.127.net/DATracker.globals.1.6.8.js";first_script=document.getElementsByTagName("script")[0];first_script.parentNode.insertBefore(script,first_script)}if(!datracker["__SV"]){var win=window;var gen_fn,functions,i,lib_name="DATracker";window[lib_name]=datracker;datracker["_i"]=[];datracker["init"]=function(token,config,name){var target=datracker;if(typeof(name)!=="undefined"){target=datracker[name]=[]}else{name=lib_name}target["people"]=target["people"]||[];target["abtest"]=target["abtest"]||[];target["toString"]=function(no_stub){var str=lib_name;if(name!==lib_name){str+="."+name}if(!no_stub){str+=" (stub)"}return str};target["people"]["toString"]=function(){return target.toString(1)+".people (stub)"};function _set_and_defer(target,fn){var split=fn.split(".");if(split.length==2){target=target[split[0]];fn=split[1]}target[fn]=function(){target.push([fn].concat(Array.prototype.slice.call(arguments,0)))}}functions="get_user_id track_heatmap register_attributes register_attributes_once clear_attributes unregister_attributes current_attributes single_pageview disable time_event get_appStatus track set_userId track_pageview track_links track_forms register register_once alias unregister identify login logout signup name_tag set_config reset people.set people.set_once people.set_realname people.set_country people.set_province people.set_city people.set_age people.set_gender people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.set_populationWithAccount people.set_location people.set_birthday people.set_region people.set_account abtest.get_variation abtest.async_get_variable".split(" ");for(i=0;i<functions.length;i++){_set_and_defer(target,functions[i])}datracker["_i"].push([token,config,name])};datracker["__SV"]=1.6;loadJsSDK()}})(document,window["DATracker"]||[],window);
// 初始化
DATracker.init("MA-BB82-719F1D1BF817", {
truncateLength: 255,
persistence: "localStorage",
cross_subdomain_cookie: false,
heatmap:{
isTrackLink: false,
loadTimeout: 3000,
collect_element: function(targetElement) {
//点击的元素属性 hubble-disable 为true时，不采集这个元素的热力图数据
if(targetElement.getAttribute('data-sensorsheatmap') === 'trackHeatMap'){
return true;
}else{
return false;
}
}
}
});
</script>
</body>
</html>
